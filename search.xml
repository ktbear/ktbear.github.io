<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>springç¬”è®°</title>
    <url>/note/10/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/04/25/bhAtar6LYvPQFz4.jpg"><a id="more"></a><h6 id="1-å¯¼å…¥mavenä¾èµ–"><a href="#1-å¯¼å…¥mavenä¾èµ–" class="headerlink" title="1. å¯¼å…¥mavenä¾èµ–"></a>1. å¯¼å…¥mavenä¾èµ–</h6><ul><li>æ³¨æ„ï¼šå¯¼å…¥ç›¸å…³ä¾èµ–ï¼Œä¸ºäº†å‡å°‘æ‰‹å†™ä¹Ÿå¯ç›´æ¥å¯¼å…¥spring-webmvcä¾èµ–åŒ…</li></ul><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>spring_01<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line"><span class="comment"><!--å¯¼å…¥springåŠå…¶ç›¸å…³ä¾èµ–ï¼ˆaop,beans,context,core,expression,spring-webï¼šspring-webmvcåŒ…å«springç›¸å…³ä¾èµ–--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.springframework<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>spring-webmvc<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>5.2.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"><span class="comment"><!--    å•å…ƒæµ‹è¯•--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>junit<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>junit<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>4.12<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">scope</span>></span>test<span class="tag"></<span class="name">scope</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"><span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h6 id="2-ApplicationContext-xmlå…¨å±€é…ç½®æ–‡ä»¶"><a href="#2-ApplicationContext-xmlå…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="2.ApplicationContext.xmlå…¨å±€é…ç½®æ–‡ä»¶"></a>2.ApplicationContext.xmlå…¨å±€é…ç½®æ–‡ä»¶</h6><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag"></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/aop/spring-aop.xsd"</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!-- æŒ‡å®šæ‰«æorg.exampleåŒ…ä¸‹çš„æ‰€æœ‰ç±»ä¸­çš„æ³¨è§£  --></span></span><br><span class="line">    <span class="tag"><<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"org.example"</span>></span><span class="tag"></<span class="name">context:component-scan</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--å¼€å¯æ³¨è§£--></span></span><br><span class="line">    <span class="tag"><<span class="name">context:annotation-config</span>/></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"><!--springå®¹å™¨ä¸­beanå¯¹è±¡--></span></span><br><span class="line">  <span class="comment"><!--  <bean id="user" class="org.example.pojo.User"></span></span><br><span class="line"><span class="comment">        <property name="name" value="chengLong"/></span></span><br><span class="line"><span class="comment">    </bean></span></span><br><span class="line"><span class="comment">--></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!-- more bean definitions go here --></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">beans</span>></span></span><br></pre></td></tr></tbody></table></figure><h6 id="3-é™æ€ä»£ç†"><a href="#3-é™æ€ä»£ç†" class="headerlink" title="3. é™æ€ä»£ç†"></a>3. é™æ€ä»£ç†</h6><ul><li><p>ä»£ç†æ¨¡å¼åˆ†ä¸ºä¸‰ä¸ªè§’è‰²ï¼šè¢«ä»£ç†è§’è‰²ã€ä»£ç†è§’è‰²ã€å®¢æˆ·è§’è‰²ï¼Œä»¥ç§Ÿæˆ¿ä¸ºå®ä¾‹è¿›è¡Œæ¼”ç¤ºï¼š</p><ul><li>ç§Ÿæˆ¿æŠ½è±¡æ¥å£ç±»</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç§Ÿæˆ¿æŠ½è±¡æ¥å£*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rent</span> </span>{</span><br><span class="line">    <span class="comment">//å‡ºç§Ÿæˆ¿å±‹çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è¢«ä»£ç†å¯¹è±¡ç±»ï¼ˆæˆ¿ä¸œï¼‰</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*çœŸå®è§’è‰²ï¼ˆæˆ¿ä¸œï¼‰*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Host</span> <span class="keyword">implements</span> <span class="title">Rent</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"xxè¦å‡ºç§Ÿæˆ¿å±‹"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ä»£ç†å¯¹è±¡ç±»ï¼ˆç§Ÿæˆ¿ä¸­ä»‹ï¼‰</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ä»£ç†è§’è‰²ï¼ˆæˆ¿å±‹ä¸­ä»‹ï¼‰*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">proxy</span> <span class="keyword">implements</span> <span class="title">Rent</span> </span>{</span><br><span class="line">    <span class="comment">//è¢«ä»£ç†çš„ç±»</span></span><br><span class="line">    <span class="keyword">private</span> Host host;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHost</span><span class="params">(Host host)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.host = host;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="comment">//è°ƒç”¨ä»£ç†ç±»ç‰¹æœ‰çš„æ–¹æ³•å®ç°ä¸ä¿®æ”¹åŸæœ‰ä»£ç ï¼ˆhostç±»ï¼‰è€Œå®ç°åŠŸèƒ½çš„å¢åŠ </span></span><br><span class="line">        pre();</span><br><span class="line"></span><br><span class="line">        host.rent();</span><br><span class="line"></span><br><span class="line">        after();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä»£ç†ç±»ç‰¹æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pre</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"ã€Debugã€‘"</span>+<span class="string">"å¸¦å®¢æˆ·çœ‹æˆ¿"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//ä»£ç†ç±»ç‰¹æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"ã€Debugã€‘"</span>+<span class="string">"æ”¶å–ç§Ÿé‡‘å¹¶ç­¾å®šç§ŸèµåˆåŒ"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>å®¢æˆ·ç±»</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å®¢æˆ·*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        Host host = <span class="keyword">new</span> Host();</span><br><span class="line"></span><br><span class="line">        proxy proxy = <span class="keyword">new</span> proxy();</span><br><span class="line">        proxy.setHost(host);</span><br><span class="line">        proxy.rent();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h6 id="4-åŠ¨æ€ä»£ç†"><a href="#4-åŠ¨æ€ä»£ç†" class="headerlink" title="4. åŠ¨æ€ä»£ç†"></a>4. åŠ¨æ€ä»£ç†</h6><ul><li>åŠ¨æ€ä»£ç†å³åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ï¼Œå®ä¾‹ä»¥é™æ€ä»£ç†ä¸ºåŸºç¡€åšå‡çº§ã€‚</li><li>æŠ½è±¡æ¥å£</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ç§Ÿæˆ¿æŠ½è±¡æ¥å£*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Rent</span> </span>{</span><br><span class="line">    <span class="comment">//å‡ºç§Ÿæˆ¿å±‹çš„æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è¢«ä»£ç†ç±»</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*çœŸå®è§’è‰²ï¼ˆæˆ¿ä¸œï¼‰*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Host</span> <span class="keyword">implements</span> <span class="title">Rent</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"xxè¦å‡ºç§Ÿæˆ¿å±‹"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>å®ç°<strong>InvocationHandler</strong>æ¥å£çš„ç±»ç”¨äºåŠ¨æ€ç”Ÿæˆä»£ç†</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*åŠ¨æ€ä»£ç†ä¸‡èƒ½æ¨¡æ¿,InvocationHandlerè¿™ä¸ªç±»è‡ªåŠ¨ç”Ÿæˆä»£ç†ç±»*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> Object target;<span class="comment">//è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTarget</span><span class="params">(Object target)</span> </span>{</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="keyword">this</span>.getClass().getClassLoader(),</span><br><span class="line">                target.getClass().getInterfaces(),<span class="keyword">this</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¤„ç†ä»£ç†å®ä¾‹å¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line"></span><br><span class="line">        before(method.getName());</span><br><span class="line">        Object result = method.invoke(target, args);</span><br><span class="line">        after(method.getName());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç‰¹æœ‰æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(String b)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"[Debug]:"</span>+b+<span class="string">"æ–¹æ³•åˆå§‹åŒ–"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">(String a)</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"[Debug]:"</span>+a+<span class="string">"æ–¹æ³•ç»“æŸ"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>æµ‹è¯•ç±»</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å®¢æˆ·*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">        Host host = <span class="keyword">new</span> Host();</span><br><span class="line">        <span class="comment">//ä»£ç†è§’è‰²ï¼Œä¸å­˜åœ¨</span></span><br><span class="line">        ProxyInvocationHandler pid = <span class="keyword">new</span> ProxyInvocationHandler();</span><br><span class="line">        <span class="comment">//è®¾ç½®è¦ä»£ç†çš„å¯¹è±¡</span></span><br><span class="line">        pid.setTarget(host);</span><br><span class="line">        <span class="comment">//åŠ¨æ€ç”Ÿæˆä»£ç†ç±»</span></span><br><span class="line">        Rent proxy =(Rent) pid.getProxy();</span><br><span class="line">        proxy.rent();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è¾“å‡ºç»“æœ</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">[Debug]:rentæ–¹æ³•åˆå§‹åŒ–</span><br><span class="line">xxè¦å‡ºç§Ÿæˆ¿å±‹</span><br><span class="line">[Debug]:rentæ–¹æ³•ç»“æŸ</span><br></pre></td></tr></tbody></table></figure><h6 id="5-aopé¢å‘åˆ‡é¢ç¼–ç¨‹"><a href="#5-aopé¢å‘åˆ‡é¢ç¼–ç¨‹" class="headerlink" title="5. aopé¢å‘åˆ‡é¢ç¼–ç¨‹"></a>5. aopé¢å‘åˆ‡é¢ç¼–ç¨‹</h6><p>â€‹ 5.1 aopé¢å‘åˆ‡é¢ç¼–ç¨‹æœ‰ä¸‰ç§æ–¹æ³•åˆ†åˆ«æ˜¯é¢å‘æ¥å£çš„aopé…ç½®ã€é¢å‘åˆ‡é¢çš„aopé…ç½®ã€æ³¨è§£é…ç½®ã€‚</p><p>æ–¹æ³•ä¸€ï¼š</p><ul><li>æ¥å£å’Œå®ä½“ç±»(è¢«ä»£ç†ç±»ã€ç›®æ ‡ç±»)</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*ä¸šåŠ¡æŠ½è±¡æ¥å£*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*çœŸå®ä¸šåŠ¡*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">add</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"æ·»åŠ ç”¨æˆ·"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"ok"</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"åˆ é™¤ç”¨æˆ·"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"ä¿®æ”¹ç”¨æˆ·"</span>);</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">select</span><span class="params">()</span> </span>{</span><br><span class="line">        System.out.println(<span class="string">"æŸ¥è¯¢ç”¨æˆ·"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è¦å¢å¼ºçš„ç‰¹å®šæ–¹æ³•ï¼ˆé€šçŸ¥ï¼‰</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.advice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.MethodBeforeAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*æ–¹æ³•ä¸€    å‰ç½®æ–¹æ³•*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Before</span> <span class="keyword">implements</span> <span class="title">MethodBeforeAdvice</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">(Method method, Object[] objects, Object o)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        System.out.println(method.getName()+<span class="string">"æ–¹æ³•è¢«åˆå§‹åŒ–äº†"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.advice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.aop.AfterReturningAdvice;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*æ–¹æ³•ä¸€    åç½®æ–¹æ³•*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">After</span> <span class="keyword">implements</span> <span class="title">AfterReturningAdvice</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterReturning</span><span class="params">(Object o, Method method, Object[] objects, Object o1)</span> <span class="keyword">throws</span> Throwable </span>{</span><br><span class="line">        System.out.println(method.getName()+<span class="string">"æ–¹æ³•ç»“æŸäº†"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è£…é…beanå’Œé…ç½®aop</li></ul><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">        http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="tag"><span class="string">        https://www.springframework.org/schema/aop/spring-aop.xsd"</span>></span></span><br><span class="line"></span><br><span class="line"><span class="comment"><!--æ³¨å†Œbean--></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"before"</span> <span class="attr">class</span>=<span class="string">"org.example.advice.Before"</span>></span><span class="tag"></<span class="name">bean</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userService"</span> <span class="attr">class</span>=<span class="string">"org.example.service.UserServiceImpl"</span>></span><span class="tag"></<span class="name">bean</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"after"</span> <span class="attr">class</span>=<span class="string">"org.example.advice.After"</span>></span><span class="tag"></<span class="name">bean</span>></span></span><br><span class="line">    <span class="comment"><!--æ–¹æ³•äºŒ--></span></span><br><span class="line">    <span class="tag"><<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"aspect"</span> <span class="attr">class</span>=<span class="string">"org.example.aspect.Aspect"</span>></span><span class="tag"></<span class="name">bean</span>></span></span><br><span class="line">    <span class="comment"><!--aopé…ç½®   æ–¹æ³•ä¸€ åŸç”Ÿæ€é¢å‘æ¥å£ï¼ˆåŠŸèƒ½å¼ºå¤§ï¼‰--></span></span><br><span class="line">    <span class="tag"><<span class="name">aop:config</span>></span></span><br><span class="line">        <span class="comment"><!--expression:è¡¨è¾¾å¼ï¼Œexecution(è¿”å›ç±»å‹ å…·ä½“ç±».æ–¹æ³•(å‚æ•°)) *ä»£è¡¨æ‰€æœ‰ç±»å‹--></span></span><br><span class="line">        <span class="tag"><<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pointcut"</span> <span class="attr">expression</span>=<span class="string">"execution(* org.example.service.UserServiceImpl.*(..))"</span>/></span></span><br><span class="line">        <span class="comment"><!--ç¯ç»•é€šçŸ¥ å‰ç½®--></span></span><br><span class="line">        <span class="tag"><<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"before"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut"</span>></span><span class="tag"></<span class="name">aop:advisor</span>></span></span><br><span class="line">        <span class="comment"><!--åç½®--></span></span><br><span class="line">        <span class="tag"><<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"after"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut"</span>></span><span class="tag"></<span class="name">aop:advisor</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"></<span class="name">aop:config</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--æ–¹æ³•äºŒ é¢å‘åˆ‡é¢--></span></span><br><span class="line">   <span class="tag"><<span class="name">aop:config</span>></span></span><br><span class="line">       <span class="tag"><<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">"pointcut"</span> <span class="attr">expression</span>=<span class="string">"execution(* org.example.service.UserServiceImpl.*(..))"</span>/></span></span><br><span class="line">       <span class="tag"><<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">"aspect"</span> ></span></span><br><span class="line">           <span class="tag"><<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">"before"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut"</span>></span><span class="tag"></<span class="name">aop:before</span>></span></span><br><span class="line">           <span class="tag"><<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">"after"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pointcut"</span>></span><span class="tag"></<span class="name">aop:after</span>></span></span><br><span class="line">       <span class="tag"></<span class="name">aop:aspect</span>></span></span><br><span class="line">   <span class="tag"></<span class="name">aop:config</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">beans</span>></span></span><br></pre></td></tr></tbody></table></figure><ul><li>æµ‹è¯•ç±»</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTest</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        ClassPathXmlApplicationContext context = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"ApplicationContext.xml"</span>);</span><br><span class="line">        <span class="comment">//è·å–æ¥å£å¯¹è±¡</span></span><br><span class="line">        UserService userService = context.getBean(<span class="string">"userService"</span>, UserService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">       userService.add();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è¿è¡Œç»“æœ</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">addæ–¹æ³•è¢«åˆå§‹åŒ–äº†</span><br><span class="line">æ·»åŠ ç”¨æˆ·</span><br><span class="line">addæ–¹æ³•ç»“æŸäº†</span><br></pre></td></tr></tbody></table></figure><p>æ–¹æ³•äºŒï¼š</p><ul><li>å®ä½“ç±»å’Œæ¥å£å¦‚åŒæ–¹æ³•ä¸€ï¼Œä¸åŒä¹‹å¤„æ˜¯é€šçŸ¥åŠé…ç½®ï¼Œé€šçŸ¥ç±»å¦‚ä¸‹</li></ul><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.aspect;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*æ–¹æ³•äºŒ é¢å‘åˆ‡é¢*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Aspect</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"æ–¹æ³•æ‰§è¡Œäº†"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">after</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"æ–¹æ³•ç»“æŸäº†"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>ApplicationContext.xmlé…ç½®æ–‡ä»¶è¯¦è§£æ–¹æ³•ä¸€</li></ul><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>spring</category>
      </categories>
      <tags>
        <tag>spring</tag>
        <tag>aop</tag>
      </tags>
  </entry>
  <entry>
    <title>Ngrokå†…ç½‘ç©¿é€</title>
    <url>/net/12/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h3 id="ğŸ»ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€ï¼Ÿ"><a href="#ğŸ»ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€ï¼Ÿ" class="headerlink" title="ğŸ»ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€ï¼Ÿ"></a>ğŸ»ä»€ä¹ˆæ˜¯å†…ç½‘ç©¿é€ï¼Ÿ</h3><p>å†…ç½‘ç©¿é€ï¼Œå³NATç©¿é€ï¼Œç½‘ç»œè¿æ¥æ—¶æœ¯è¯­ï¼Œè®¡ç®—æœºæ˜¯å±€åŸŸç½‘å†…æ—¶ï¼Œå¤–ç½‘ä¸å†…ç½‘çš„è®¡ç®—æœºèŠ‚ç‚¹éœ€è¦è¿æ¥é€šä¿¡ï¼Œæœ‰æ—¶å°±ä¼šå‡ºç°ä¸æ”¯æŒå†…ç½‘ç©¿é€ã€‚å°±æ˜¯è¯´æ˜ å°„ç«¯å£ï¼Œèƒ½è®©å¤–ç½‘çš„ç”µè„‘æ‰¾åˆ°å¤„äºå†…ç½‘çš„ç”µè„‘ï¼Œæé«˜ä¸‹è½½é€Ÿåº¦ã€‚ä¸ç®¡æ˜¯å†…ç½‘ç©¿é€è¿˜æ˜¯å…¶ä»–ç±»å‹çš„ç½‘ç»œç©¿é€ï¼Œéƒ½æ˜¯ç½‘ç»œç©¿é€çš„ç»Ÿä¸€æ–¹æ³•æ¥ç ”ç©¶å’Œè§£å†³ã€‚</p><h4 id="ğŸ»ä½¿ç”¨Ngrokå®ç°å†…ç½‘ç©¿é€"><a href="#ğŸ»ä½¿ç”¨Ngrokå®ç°å†…ç½‘ç©¿é€" class="headerlink" title="ğŸ»ä½¿ç”¨Ngrokå®ç°å†…ç½‘ç©¿é€"></a>ğŸ»ä½¿ç”¨Ngrokå®ç°å†…ç½‘ç©¿é€</h4><ol><li>ç™¾åº¦Ngrokè¿›å…¥å›½å†…ä¸»é¡µï¼Œæ³¨å†Œè´¦æˆ·</li></ol><p><img src="https://i.loli.net/2020/05/12/OrocsqdtMaywYFG.png" alt></p><ol start="2"><li>æ³¨å†Œå®Œæˆåï¼Œç™»å½•åéœ€è¦å¾®ä¿¡éªŒè¯ä¸‹ï¼Œç„¶åæˆ‘ä»¬å¼€é€šéš§é“</li></ol><p><img src="https://i.loli.net/2020/05/12/qV2EdpYzfnKjJuw.png" alt></p><ol start="3"><li>å¾€ä¸‹ç¿»ä½ å°±å¯ä»¥çœ‹åˆ°0å…ƒçš„å¥—é¤ï¼Œç„¶åç‚¹å‡»è´­ä¹°</li></ol><p><img src="https://i.loli.net/2020/05/12/gGet7TohJyicDWY.png" alt></p><ol start="4"><li>å¡«å†™ä¿¡æ¯</li></ol><p><img src="https://i.loli.net/2020/05/12/m5fodixbpOh6saR.png" alt></p><ol start="5"><li>å¡«å¥½ä¿¡æ¯åä¸‹è½½å®¢æˆ·ç«¯</li></ol><p><img src="https://i.loli.net/2020/05/12/1HTd3hJbnpKfz8D.png" alt></p><ol start="6"><li>ä¸‹è½½åå¯åŠ¨.batå¯æ‰§è¡Œæ–‡ä»¶</li></ol><p><img src="https://i.loli.net/2020/05/12/gdfvLRKpzE4usJX.png" alt><br>æœ€åè¾“å…¥ä½ åˆšåˆšè´­ä¹°çš„éš§é“idå¯åŠ¨å®¢æˆ·ç«¯ï¼Œæ¥ç€ç”¨Ngrokè‡ªåŠ¨ç”Ÿæˆçš„å¤–ç½‘ipè®¿é—®æœ¬æœºçš„é¡¹ç›®ï¼Œæ³¨æ„è®¿é—®æ—¶å…ˆå¯åŠ¨æœ¬åœ°é¡¹ç›®ã€‚</p><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>å†…ç½‘ç©¿é€</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œ</tag>
      </tags>
  </entry>
  <entry>
    <title>èŠä¸€èŠå¾®æœåŠ¡ï¼ˆä¸Šï¼‰</title>
    <url>/service1/28/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/05/06/3POFgbz5awRUc1X.jpg"><a id="more"></a><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¾®æœåŠ¡"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¾®æœåŠ¡" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¾®æœåŠ¡"></a>ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦å¾®æœåŠ¡</h2><p>â€‹ ä¼ ç»Ÿå¼€å‘æ¨¡å¼ä¸‹ï¼Œç»å¤§éƒ¨åˆ†çš„Webåº”ç”¨éƒ½æ˜¯é‡‡ç”¨å•ä½“æ¶æ„çš„é£æ ¼æ¥è¿›è¡Œæ„å»ºçš„ï¼Œè¿™æ„å‘³ç€Webåº”ç”¨æ˜¯ä½œä¸ºå•ä¸ªå¯éƒ¨ç½²çš„è½¯ä»¶åˆ¶å“è¿›è¡Œäº¤ä»˜çš„ï¼Œæ‰€æœ‰çš„æ¥å£ã€ä¸šåŠ¡é€»è¾‘ã€æŒä¹…å±‚éƒ½è¢«æ‰“åŒ…åœ¨ä¸€ä¸ªWebåº”ç”¨ä¸­ï¼Œå¹¶ä¸”éƒ¨ç½²åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œè¿™ç§å¼€å‘æ¨¡å¼ä¼šå¸¦æ¥è¯¸å¤šä¸ä¾¿ï¼Œå¤šå›¢é˜ŸååŒå¼€å‘çš„æˆæœ¬æé«˜ã€‚</p><h4 id="1-ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼ˆå•ä½“åº”ç”¨ï¼‰"><a href="#1-ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼ˆå•ä½“åº”ç”¨ï¼‰" class="headerlink" title="1.ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼ˆå•ä½“åº”ç”¨ï¼‰"></a>1.ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼ˆå•ä½“åº”ç”¨ï¼‰</h4><p>â€‹ <img src="https://i.loli.net/2020/05/06/U7FtHq61iueyNWJ.png" alt></p><ul><li><p>å•ä½“åº”ç”¨å­˜åœ¨çš„é—®é¢˜</p><p>1.1éšç€ä¸šåŠ¡çš„å‘å±•ï¼Œå¼€å‘å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚<br>1.2ä¿®æ”¹ã€æ–°å¢æŸä¸ªåŠŸèƒ½ï¼Œéœ€è¦å¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œæµ‹è¯•ã€é‡æ–°éƒ¨ç½²ã€‚<br>1.3ä¸€ä¸ªæ¨¡å—å‡ºç°é—®é¢˜ï¼Œå¾ˆå¯èƒ½å¯¼è‡´æ•´ä¸ªç³»ç»Ÿå´©æºƒã€‚<br>1.4å¤šä¸ªå¼€å‘å›¢é˜ŸåŒæ—¶å¯¹æ•°æ®è¿›è¡Œç®¡ç†ï¼Œå®¹æ˜“äº§ç”Ÿå®‰å…¨æ¼æ´ã€‚<br>1.5å„ä¸ªæ¨¡å—ä½¿ç”¨åŒ-ç§æŠ€æœ¯è¿›è¡Œå¼€å‘ï¼Œå„ä¸ªæ¨¡å—å¾ˆéš¾æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æ›´åˆé€‚çš„æŠ€æœ¯æ¡†æ¶ï¼Œå±€é™æ€§å¾ˆå¤§ã€‚<br>1.6æ¨¡å—å†…å®¹è¿‡äºå¤æ‚ï¼Œå¦‚æœå‘˜å·¥ç¦»èŒï¼Œå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½å®Œæˆå·¥ä½œäº¤æ¥ã€‚</p></li></ul><h4 id="2-å¾®æœåŠ¡æ¶æ„"><a href="#2-å¾®æœåŠ¡æ¶æ„" class="headerlink" title="2.å¾®æœåŠ¡æ¶æ„"></a>2.å¾®æœåŠ¡æ¶æ„</h4><p><img src="https://i.loli.net/2020/05/06/vKcjUR7MfYlsh6p.png" alt="1588405762151"></p><p><img src="https://i.loli.net/2020/05/06/DomQ9we1P4lVivH.png" alt="1588410701854"></p><h4 id="3-åˆ†å¸ƒå¼ã€é›†ç¾¤"><a href="#3-åˆ†å¸ƒå¼ã€é›†ç¾¤" class="headerlink" title="3.åˆ†å¸ƒå¼ã€é›†ç¾¤"></a>3.åˆ†å¸ƒå¼ã€é›†ç¾¤</h4><ul><li>é›†ç¾¤:ä¸€å°æœåŠ¡å™¨æ— æ³•è´Ÿè·é«˜å¹¶å‘çš„æ•°æ®è®¿é—®é‡ï¼Œé‚£ä¹ˆå°±è®¾ç½®åå°æœåŠ¡å™¨-èµ·åˆ†æ‹…å‹åŠ›ï¼Œ åå°ä¸è¡Œå°±è®¾ç½®ä¸€ç™¾å°(ç‰©ç†å±‚é¢)ã€‚å¾ˆå¤šäººå¹²åŒ-ä»¶äº‹æƒ…ï¼Œæ¥åˆ†æ‘Šå‹åŠ›ã€‚</li><li>åˆ†å¸ƒå¼:å°†ä¸€ä¸ªå¤æ‚é—®é¢˜æ‹†åˆ†æˆè‹¥å¹²ä¸ªç®€å•çš„å°é—®é¢˜ï¼Œå°†ä¸€ä¸ªå¤§å‹çš„é¡¹ç›®æ¶æ„æ‹†åˆ†æˆè‹¥å¹²ä¸ªå¾®æœåŠ¡æ¥ååŒå®Œæˆ(è½¯ä»¶è®¾è®¡å±‚é¢)ã€‚å°†ä¸€ ä¸ªåºå¤§çš„å·¥ä½œæ‹†åˆ†æˆè‹¥å¹²ä¸ªå°æ­¥éª¤ï¼Œåˆ†åˆ«ç”±ä¸åŒçš„äººå®Œæˆè¿™äº›å°æ­¥éª¤ï¼Œæœ€ç»ˆå°†æ‰€æœ‰çš„ç»“æœè¿›è¡Œæ•´åˆå®ç°å¤§çš„éœ€æ±‚ã€‚</li></ul><h4 id="4-å¾®æœåŠ¡ä¼˜ç‚¹"><a href="#4-å¾®æœåŠ¡ä¼˜ç‚¹" class="headerlink" title="4.å¾®æœåŠ¡ä¼˜ç‚¹"></a>4.å¾®æœåŠ¡ä¼˜ç‚¹</h4><ul><li>å„ä¸ªæœåŠ¡çš„å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²éƒ½ç›¸äº’ç‹¬ç«‹ï¼Œæ¯”å¦‚ç”¨æˆ·æœåŠ¡å°±å¯ä»¥æ‹†åˆ†ä½œä¸º<br>ä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ï¼Œè€Œå®ƒçš„å¼€å‘ä¹Ÿä¸ç”¨ä¾èµ–äºå…¶ä»–æœåŠ¡ï¼Œå¦‚æœç”¨æˆ·é‡å¾ˆå¤§ï¼Œ<br>æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“çš„å¯¹å…¶è¿›è¡Œè´Ÿè½½ã€‚</li><li>å½“ä¸€ä¸ªæ–°éœ€æ±‚å‡ºç°æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€ä¸€ä¸ªåºå¤§çš„é¡¹ç›®ç³»ç»Ÿä¸­ï¼Œä½ å¾—å»è€ƒè™‘å„æ–¹<br>çš„é—®é¢˜ï¼Œå…¼å®¹æ€§ã€å½±å“åº¦ç­‰ç­‰ï¼Œè€Œä½¿ç”¨å¾®æœåŠ¡åˆ™å¯ä»¥ç›´æ¥è·³è¿‡è¿™äº›åºŸæ—¶åˆ<br>çƒ§è„‘çš„ç¯èŠ‚ã€‚</li><li>ä½¿ç”¨å¾®æœåŠ¡å°†é¡¹ç›®è¿›è¡Œæ‹†åˆ†ä¹‹åï¼Œå„æœåŠ¡ä¹‹é—´å°±æ¶ˆé™¤äº†è¯¸å¤šé™åˆ¶ï¼Œåªéœ€è¦<br>ä¿è¯å¯¹å¤–æä¾›çš„æ¥å£æ­£å¸¸å¯ç”¨ï¼Œè‡³äºä½¿ç”¨ä»€ä¹ˆè¯­è¨€ã€ä»€ä¹ˆæ¡†æ¶é€šé€šä¸ç”¨å…³<br>å¿ƒã€‚</li></ul><h4 id="5-å¾®æœåŠ¡çš„ç¼ºç‚¹"><a href="#5-å¾®æœåŠ¡çš„ç¼ºç‚¹" class="headerlink" title="5.å¾®æœåŠ¡çš„ç¼ºç‚¹"></a>5.å¾®æœåŠ¡çš„ç¼ºç‚¹</h4><ul><li>ä¸Šé¢æˆ‘ä»¬æåˆ°å¾®æœåŠ¡çš„æ‹†åˆ†æ˜¯åŸºäºä¸šåŠ¡çš„ï¼Œä¸æ˜¯æˆ‘ä»¬éšå¿ƒæ‰€æ¬²ï¼Œæƒ³æ€ä¹ˆæ‹†<br>å°±æ€ä¹ˆæ‹†çš„ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œç”±è°æ¥æ‹†ï¼Œæ€ä¹ˆæ‹†?è¿™å°±ç»™å›¢é˜Ÿåä½œæ²Ÿé€šå¸¦<br>æ¥äº†å¾ˆå¤šæŒ‘æˆ˜ã€‚</li><li>å½“æœåŠ¡è°ƒç”¨æ–¹éœ€è¦ä½¿ç”¨æŸæœåŠ¡çš„æ¥å£æ—¶ï¼Œé¦–å…ˆéœ€è¦æ‰¾åˆ°è¯¥æœåŠ¡çš„æä¾›æ–¹ï¼Œ<br>é€šå¸¸åœ¨ä¸€ä¸€ä¸ªå¤§å…¬å¸ä¸­ï¼Œè¿™ç§åœºæ™¯æ˜¯è·¨éƒ¨é—¨çš„ï¼Œæ²Ÿé€šæˆæœ¬å¯æƒ³è€ŒçŸ¥ã€‚åŒæ—¶ï¼Œ<br>å¦‚æœæœåŠ¡çš„æä¾›æ–¹éœ€è¦å¯¹æŸä¸ªæ¥å£è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¾—å’Œå„ä¸ªæœåŠ¡è°ƒç”¨æ–¹è¿›è¡Œ<br>æ²Ÿé€šã€‚</li><li>ç”±äºå„ä¸ªæœåŠ¡ç›¸äº’ç‹¬ç«‹ï¼Œå®ƒä»¬çš„æ•°æ®ä¹Ÿæ˜¯ç‹¬ç«‹çš„ï¼Œè¿™å°±ä¼šå¸¦æ¥-ä¸€ä¸ªé—®é¢˜ï¼Œ<br>å½“è°ƒç”¨å¤šä¸ªæœåŠ¡æ¥å£æ¥è¿›è¡Œæ“ä½œæ—¶ï¼Œå¦‚ä½•ä¿è¯å„ä¸ªæœåŠ¡çš„æ•°æ®- -è‡´æ€§ï¼Œè¿™<br>æ—¢æ˜¯é—®é¢˜ï¼Œä¹Ÿæ˜¯éš¾ç‚¹ã€‚</li></ul><h4 id="6-å¾®æœåŠ¡æ¡†æ¶å¯¹æ¯”"><a href="#6-å¾®æœåŠ¡æ¡†æ¶å¯¹æ¯”" class="headerlink" title="6.å¾®æœåŠ¡æ¡†æ¶å¯¹æ¯”"></a>6.å¾®æœåŠ¡æ¡†æ¶å¯¹æ¯”</h4><p><img src="https://i.loli.net/2020/05/06/7GStEnpLFIkogUa.png" alt="1588407091660"></p><h2 id="äºŒã€ä¸ºä»€ä¹ˆæ˜¯Spring-Cloud"><a href="#äºŒã€ä¸ºä»€ä¹ˆæ˜¯Spring-Cloud" class="headerlink" title="äºŒã€ä¸ºä»€ä¹ˆæ˜¯Spring  Cloud"></a>äºŒã€ä¸ºä»€ä¹ˆæ˜¯Spring Cloud</h2><ul><li>Spring Cloudå®Œå…¨åŸºäºSpring Boot,æœåŠ¡è°ƒç”¨æ–¹å¼æ˜¯åŸºäºREST APIï¼Œæ•´åˆäº†<br>å„ç§æˆç†Ÿçš„äº§å“å’Œæ¶æ„ï¼ŒåŒæ—¶åŸºäºSpring Bootä¹Ÿä½¿å¾—æ•´ä½“çš„å¼€å‘ã€é…ç½®ã€<br>éƒ¨ç½²éƒ½éå¸¸æ–¹ä¾¿ã€‚</li><li>Springç³»çš„äº§å“é›†åŠŸèƒ½é½å…¨ã€ç®€å•å¥½ç”¨ã€æ€§èƒ½ä¼˜è¶Šã€æ–‡æ¡£è§„èŒƒç­‰ç­‰äºä¸€èº«ï¼Œ<br>å› æ­¤Spring Cloudè¿˜æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­ä¸€ä¸ªååˆ†ä¼˜è¶Šçš„å®ç°æ–¹æ¡ˆã€‚</li></ul><h4 id="1-Spring-Cloud-æ¶æ„å›¾"><a href="#1-Spring-Cloud-æ¶æ„å›¾" class="headerlink" title="1.Spring Cloud æ¶æ„å›¾"></a>1.Spring Cloud æ¶æ„å›¾</h4><p><img src="https://i.loli.net/2020/05/06/NCVnXzK4Ys8P2vM.png" alt="1588407007493"></p><h4 id="2-Spring-Cloud-æ ¸å¿ƒç»„ä»¶"><a href="#2-Spring-Cloud-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="2.Spring Cloud æ ¸å¿ƒç»„ä»¶"></a>2.Spring Cloud æ ¸å¿ƒç»„ä»¶</h4><p><img src="https://i.loli.net/2020/05/06/EDZmTWs92OdBqV4.png" alt="1588692487250"></p><ul><li><p>æœåŠ¡æ²»ç†çš„æ ¸å¿ƒåˆä¸‰éƒ¨åˆ†ç»„æˆ:æœåŠ¡æä¾›è€…ã€æœåŠ¡æ¶ˆè´¹è€…ã€æ³¨å†Œä¸­å¿ƒã€‚</p><p><img src="https://i.loli.net/2020/05/06/3B4PY8v9DnJswoS.png" alt="1588419323735"></p><ul><li>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ä¸­ï¼Œæ¯ä¸ªå¾®æœåŠ¡åœ¨å¯åŠ¨æ—¶ï¼Œå°†è‡ªå·±çš„ä¿¡æ¯å­˜å‚¨åœ¨æ³¨å†Œä¸­å¿ƒï¼Œå«åšæœåŠ¡æ³¨å†Œã€‚</li><li>æœåŠ¡æ¶ˆè´¹è€…ä»æ³¨å†Œä¸­å¿ƒè·å–æœåŠ¡æä¾›è€…çš„ç½‘ç»œä¿¡æ¯ï¼Œé€šè¿‡è¯¥ä¿¡æ¯è°ƒç”¨æœåŠ¡,å«åšæœåŠ¡å‘ç°ã€‚</li><li>Spring Cloudçš„æœåŠ¡æ²»ç†ä½¿ç”¨Eurekaæ¥å®ç°ï¼ŒEureka æ˜¯Netflixå¼€æºçš„åŸºäºRESTçš„æœåŠ¡æ²»ç†è§£å†³æ–¹æ¡ˆï¼ŒSpringCloudé›†æˆäº†Eureka, æä¾›æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°çš„åŠŸèƒ½ï¼Œå¯ä»¥å’ŒåŸºäºSpring Bootæ­å»ºçš„å¾®æœåŠ¡åº”ç”¨è½»æ¾å®Œæˆæ•´åˆï¼Œå¼€ç®±å³ç”¨(Spring Cloud Eureka)ã€‚</li></ul></li></ul><h4 id="3-Spring-Cloud-Eureka"><a href="#3-Spring-Cloud-Eureka" class="headerlink" title="3.Spring Cloud Eureka"></a>3.Spring Cloud Eureka</h4><ul><li>Eureka Serverï¼šæ³¨å†Œä¸­å¿ƒ</li><li>Eureka Clientï¼šæ‰€æœ‰è¦è¿›è¡Œæ³¨å†Œçš„å¾®æœåŠ¡é€šè¿‡Eureka Clientè¿æ¥åˆ°Eureka Serverå®Œæˆæ³¨å†Œï¼ˆç›¸å½“äºæœåŠ¡æ¶ˆè´¹è€…å’ŒæœåŠ¡æä¾›è€…éƒ½è¦é›†æˆEureka Clientç„¶åæŠŠæœåŠ¡æ³¨å†Œåˆ°Eureka Serverä¸­ï¼‰ã€‚</li></ul><h2 id="ä¸‰ã€Eureka-Serverä»£ç å®ç°"><a href="#ä¸‰ã€Eureka-Serverä»£ç å®ç°" class="headerlink" title="ä¸‰ã€Eureka Serverä»£ç å®ç°"></a>ä¸‰ã€Eureka Serverä»£ç å®ç°</h2><h4 id="1-æ–°å»ºé¡¹ç›®åä¸ºspringcloudçš„Mavençˆ¶å·¥ç¨‹"><a href="#1-æ–°å»ºé¡¹ç›®åä¸ºspringcloudçš„Mavençˆ¶å·¥ç¨‹" class="headerlink" title="1.æ–°å»ºé¡¹ç›®åä¸ºspringcloudçš„Mavençˆ¶å·¥ç¨‹"></a>1.æ–°å»ºé¡¹ç›®åä¸ºspringcloudçš„Mavençˆ¶å·¥ç¨‹</h4><ul><li><p>çˆ¶å·¥ç¨‹pom.xmlé…ç½®</p><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">  <span class="comment"><!--springbootçˆ¶ä¾èµ–--></span></span><br><span class="line">  <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">groupId</span>></span>org.springframework.boot<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>spring-boot-starter-parent<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">version</span>></span>2.0.6.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">  <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">  <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">    <span class="comment"><!--webä¾èµ–--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">      <span class="tag"><<span class="name">groupId</span>></span>org.springframework.boot<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">      <span class="tag"><<span class="name">artifactId</span>></span>spring-boot-starter-web<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--lombok--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">      <span class="tag"><<span class="name">groupId</span>></span>org.projectlombok<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">      <span class="tag"><<span class="name">artifactId</span>></span>lombok<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">      <span class="tag"><<span class="name">optional</span>></span>true<span class="tag"></<span class="name">optional</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--è§£å†³JDK9ä»¥ä¸Šæ²¡æœ‰JAXB APIçš„é—®é¢˜éœ€åŠ å…¥ä»¥ä¸‹å››ä¸ªä¾èµ–ï¼Œ9ä»¥ä¸‹å¯ä»¥ä¸åŠ --></span></span><br><span class="line">    <span class="comment"><!--</span></span><br><span class="line"><span class="comment">        <dependency></span></span><br><span class="line"><span class="comment">            <groupId>javax.xml.bind</groupId></span></span><br><span class="line"><span class="comment">            <artifactId>jaxb-api</artifactId></span></span><br><span class="line"><span class="comment">            <version>2.3.0</version></span></span><br><span class="line"><span class="comment">        </dependency></span></span><br><span class="line"><span class="comment">        <dependency></span></span><br><span class="line"><span class="comment">            <groupId>com.sun.xml.bind</groupId></span></span><br><span class="line"><span class="comment">            <artifactId>jaxb-impl</artifactId></span></span><br><span class="line"><span class="comment">            <version>2.3.0</version></span></span><br><span class="line"><span class="comment">        </dependency></span></span><br><span class="line"><span class="comment">        <dependency></span></span><br><span class="line"><span class="comment">            <groupId>com.sun.xml.bind</groupId></span></span><br><span class="line"><span class="comment">            <artifactId>jaxb-core</artifactId></span></span><br><span class="line"><span class="comment">            <version>2.3.0</version></span></span><br><span class="line"><span class="comment">        </dependency></span></span><br><span class="line"><span class="comment">        <dependency></span></span><br><span class="line"><span class="comment">            <groupId>javax.activation</groupId></span></span><br><span class="line"><span class="comment">            <artifactId>activation</artifactId></span></span><br><span class="line"><span class="comment">            <version>1.1.1</version></span></span><br><span class="line"><span class="comment">        </dependency></span></span><br><span class="line"><span class="comment">        --></span></span><br><span class="line">  <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line">  <span class="comment"><!--springCloudä¾èµ–--></span></span><br><span class="line">  <span class="tag"><<span class="name">dependencyManagement</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">      <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-dependencies<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>Finchley.SR2<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">type</span>></span>pom<span class="tag"></<span class="name">type</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">scope</span>></span>import<span class="tag"></<span class="name">scope</span>></span></span><br><span class="line">      <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line">  <span class="tag"></<span class="name">dependencyManagement</span>></span></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="2-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºåä¸ºeurekaserverçš„æ¨¡å—ï¼ˆModuleï¼‰å³æ³¨å†Œä¸­å¿ƒ"><a href="#2-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºåä¸ºeurekaserverçš„æ¨¡å—ï¼ˆModuleï¼‰å³æ³¨å†Œä¸­å¿ƒ" class="headerlink" title="2.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºåä¸ºeurekaserverçš„æ¨¡å—ï¼ˆModuleï¼‰å³æ³¨å†Œä¸­å¿ƒ"></a>2.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºåä¸ºeurekaserverçš„æ¨¡å—ï¼ˆModuleï¼‰å³æ³¨å†Œä¸­å¿ƒ</h4></li><li><p>eurekaserveræ¨¡å—ä¸‹pom.xmlé…ç½®</p></li></ul><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>eurekaserver<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--éœ€è¦å¯¼å…¥çš„æ³¨å†Œä¸­å¿ƒç»„ä»¶--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-server<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="3-åœ¨åŒ…eurekaserver-src-main-resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application-ymlï¼Œæ·»åŠ Eureka-Serverç›¸å…³çš„é…ç½®"><a href="#3-åœ¨åŒ…eurekaserver-src-main-resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application-ymlï¼Œæ·»åŠ Eureka-Serverç›¸å…³çš„é…ç½®" class="headerlink" title="3.åœ¨åŒ…eurekaserver.src.main.resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application.ymlï¼Œæ·»åŠ Eureka Serverç›¸å…³çš„é…ç½®"></a>3.åœ¨åŒ…eurekaserver.src.main.resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application.ymlï¼Œæ·»åŠ Eureka Serverç›¸å…³çš„é…ç½®</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#Eureka ServeræœåŠ¡ç«¯å£å·éšä¾¿é…ç½®</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8761</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#eureka.register-with-eureka: æ˜¯å¦å°†å½“å‰çš„Eureka ServeræœåŠ¡ä½œä¸ºå®¢æˆ·ç«¯è¿›è¡Œæ³¨å†Œ</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="comment">#æ˜¯å¦è¦æ³¨å†Œè‡ªå·±</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">#æ˜¯å¦è¦åŒæ­¥å…¶ä»–æ³¨å†Œä¸­å¿ƒï¼ˆEurekaServerï¼‰çš„æ•°æ®</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment">#æ³¨å†Œä¸­å¿ƒçš„è®¿é—®è·¯å¾„</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></tbody></table></figure><h4 id="4-åœ¨åŒ…eurekaserver-src-mainåˆ›å»ºåŒ…org-exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»"><a href="#4-åœ¨åŒ…eurekaserver-src-mainåˆ›å»ºåŒ…org-exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»" class="headerlink" title="4.åœ¨åŒ…eurekaserver.src.mainåˆ›å»ºåŒ…org.exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»"></a>4.åœ¨åŒ…eurekaserver.src.mainåˆ›å»ºåŒ…org.exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span>   <span class="comment">//å£°æ˜è¯¥ç±»æ˜¯ä¸€ä¸ªEurekaServerå¾®æœåŠ¡,æä¾›æœåŠ¡æ³¨å†Œå’ŒæœåŠ¡å‘ç°åŠŸèƒ½ï¼Œå³æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaServerApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(EurekaServerApplication<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="5-å¯åŠ¨å¾®æœåŠ¡æ˜¾ç¤ºé¡µé¢ï¼ˆhttp-localhost-8761ï¼‰"><a href="#5-å¯åŠ¨å¾®æœåŠ¡æ˜¾ç¤ºé¡µé¢ï¼ˆhttp-localhost-8761ï¼‰" class="headerlink" title="5.å¯åŠ¨å¾®æœåŠ¡æ˜¾ç¤ºé¡µé¢ï¼ˆhttp://localhost:8761ï¼‰"></a>5.å¯åŠ¨å¾®æœåŠ¡æ˜¾ç¤ºé¡µé¢ï¼ˆ<a href="http://localhost:8761ï¼‰">http://localhost:8761ï¼‰</a></h4><p><img src="https://i.loli.net/2020/05/06/4IFTmzpWwDtuLHU.png" alt="1588420890055"></p><h2 id="å››ã€Eureka-Clientä»£ç å®ç°"><a href="#å››ã€Eureka-Clientä»£ç å®ç°" class="headerlink" title="å››ã€Eureka Clientä»£ç å®ç°"></a>å››ã€Eureka Clientä»£ç å®ç°</h2><h4 id="1-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºå­æ¨¡å—eurekaclient"><a href="#1-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºå­æ¨¡å—eurekaclient" class="headerlink" title="1.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºå­æ¨¡å—eurekaclient"></a>1.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºå­æ¨¡å—eurekaclient</h4><ul><li>eurekaclientå­æ¨¡å—ä¸‹pom.xmlé…ç½®</li></ul><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>eurekaclient<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--æ‰€éœ€çš„eureka-clientä¾èµ–--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="2-åœ¨åŒ…eurekaclient-src-main-resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application-ymlï¼Œæ·»åŠ Eureka-Clientç›¸å…³çš„é…ç½®"><a href="#2-åœ¨åŒ…eurekaclient-src-main-resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application-ymlï¼Œæ·»åŠ Eureka-Clientç›¸å…³çš„é…ç½®" class="headerlink" title="2.åœ¨åŒ…eurekaclient.src.main.resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application.ymlï¼Œæ·»åŠ Eureka Clientç›¸å…³çš„é…ç½®"></a>2.åœ¨åŒ…eurekaclient.src.main.resourceä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶application.ymlï¼Œæ·»åŠ Eureka Clientç›¸å…³çš„é…ç½®</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#ç«¯å£éšä¾¿é…ç½®</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8010</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å½“å‰æœåŠ¡æ³¨å†Œåœ¨Eureka Serverä¸Šçš„åç§°ï¼Œåé¢å¯ä»¥ç›´æ¥é€šè¿‡åå­—è®¿é—®</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">provider</span>  <span class="comment">#å‡è®¾æ˜¯æœåŠ¡æä¾›è€…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†æ³¨å†Œä¸­å¿ƒçš„åœ°å€é…ç½®è¿‡æ¥ï¼ˆæ³¨å†Œä¸­å¿ƒè®¿é—®åœ°å€ï¼‰</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦å°†å½“å‰æœåŠ¡çš„ipæ³¨å†Œåˆ°EurekaServer</span></span><br></pre></td></tr></tbody></table></figure><h4 id="3-åœ¨åŒ…eurekaclient-src-mainåˆ›å»ºåŒ…org-exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»"><a href="#3-åœ¨åŒ…eurekaclient-src-mainåˆ›å»ºåŒ…org-exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»" class="headerlink" title="3.åœ¨åŒ…eurekaclient.src.mainåˆ›å»ºåŒ…org.exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»"></a>3.åœ¨åŒ…eurekaclient.src.mainåˆ›å»ºåŒ…org.exampleï¼ˆæ ¹æ®è‡ªå·±çš„åˆ›å»ºï¼‰ï¼Œspringbootå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProviderApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(ProviderApplication<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>4.å°†æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œé¦–å…ˆå¯åŠ¨EurekaServerApplicationï¼ˆæ³¨å†Œä¸­å¿ƒï¼‰ï¼Œå†å¯åŠ¨ProviderApplicationï¼ˆæœåŠ¡æä¾›è€…ï¼‰ï¼Œå†æµè§ˆå™¨åœ°å€æ è¾“å…¥æ³¨å†Œä¸­å¿ƒåœ°å€ï¼š<a href="http://localhost:8761/ï¼Œæ˜¾ç¤ºé¡µé¢å¦‚ä¸‹ï¼š" target="_blank" rel="noopener">http://localhost:8761/ï¼Œæ˜¾ç¤ºé¡µé¢å¦‚ä¸‹ï¼š</a></p><p><img src="https://i.loli.net/2020/05/06/CH9uEU1BVfIWw3x.png" alt="1588427608086"></p><ul><li>å¦‚æœæ²¡æœ‰å‡ºç°å¦‚å›¾çš„æƒ…å†µï¼ŒæŸ¥çœ‹ä¸€ä¸‹eurekaclientæˆ–è€…eurekaserverçš„pom.xmlä¾èµ–ï¼Œæ³¨æ„ä¸è¦æŠŠeurekaclientçš„ä¾èµ–å†™æˆspring-cloud-netflix-eureka-clientï¼Œè¯·ä»”ç»†è§‚å¯Ÿ</li></ul><p>5.æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ¯ä¸ªæœåŠ¡æä¾›è€…å°±å……å½“ä¸€ä¸ªä¸€ä¸ªçš„åŠŸèƒ½æ¨¡å—ã€‚è¿™é‡ŒåŸºäºeurekaclientï¼ˆæœåŠ¡æä¾›è€…ï¼‰å†™ä¸ªå°ä¸šåŠ¡ä¾¿äºç†è§£ï¼Œé¦–å…ˆåœ¨eurekaclint(eurekaclient.src.main.java.org.example)ç›®å½•ä¸‹åˆ†åˆ«åˆ›å»ºdaoå±‚ï¼Œentity,controllerå±‚ï¼Œè¿™é‡Œçœç•¥serviceå±‚</p><ul><li><p>entity</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.entity;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨lombokéœ€è¦ä¸‹è½½lombokæ’ä»¶</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>Daoå±‚æ¥å£</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentRepository</span> </span>{</span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="comment">//æŸ¥æ‰¾</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</span><br><span class="line">    <span class="comment">//æ·»åŠ æˆ–ä¿®æ”¹</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveOrUpdate</span><span class="params">(Student student)</span></span>;</span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>Daoå±‚å®ç°ç±»</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.dao.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.dao.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentRepositoryImpl</span> <span class="keyword">implements</span> <span class="title">StudentRepository</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‘Mapé›†åˆæ·»åŠ æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map<Long, Student> studentMap;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> {</span><br><span class="line">        studentMap = <span class="keyword">new</span> HashMap<>();</span><br><span class="line">        studentMap.put(<span class="number">1L</span>, <span class="keyword">new</span> Student(<span class="number">1L</span>, <span class="string">"åˆ˜å¤‡"</span>, <span class="number">24</span>));</span><br><span class="line">        studentMap.put(<span class="number">3L</span>, <span class="keyword">new</span> Student(<span class="number">3L</span>, <span class="string">"å…³ç¾½"</span>, <span class="number">23</span>));</span><br><span class="line">        studentMap.put(<span class="number">2L</span>, <span class="keyword">new</span> Student(<span class="number">2L</span>, <span class="string">"å¼ é£"</span>, <span class="number">22</span>));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span>  studentMap.values();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(<span class="keyword">long</span> id)</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> studentMap.get(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveOrUpdate</span><span class="params">(Student student)</span> </span>{</span><br><span class="line">        studentMap.put(student.getId(), student);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(<span class="keyword">long</span> id)</span> </span>{</span><br><span class="line">        studentMap.remove(id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>Controllerå±‚</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.dao.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/student"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentController</span> </span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line">        studentRepository.saveOrUpdate(student);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line">        studentRepository.saveOrUpdate(student);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/deleteById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line">        studentRepository.deleteById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>æ•´ä½“é¡¹ç›®ç»“æ„</p><p><img src="https://i.loli.net/2020/05/06/GEnmQBMLfdPXjvS.png" alt="1588435093112"></p></li><li><p>æµ‹è¯•eurekaclientåŠŸèƒ½æ¨¡å—</p><p>æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:8010/student/findAllæµ‹è¯•æˆ‘ä»¬åˆšåˆšå†™çš„æŸ¥è¯¢å­¦ç”Ÿæ–¹æ³•ï¼Œå…¶ä»–æ¥å£è‡ªè¡Œæµ‹è¯•ï¼Œè¿”å›ç»“æœï¼š" target="_blank" rel="noopener">http://localhost:8010/student/findAllæµ‹è¯•æˆ‘ä»¬åˆšåˆšå†™çš„æŸ¥è¯¢å­¦ç”Ÿæ–¹æ³•ï¼Œå…¶ä»–æ¥å£è‡ªè¡Œæµ‹è¯•ï¼Œè¿”å›ç»“æœï¼š</a></p><figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">[{<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"name"</span>:<span class="string">"åˆ˜å¤‡"</span>,<span class="attr">"age"</span>:<span class="number">24</span>},{<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"name"</span>:<span class="string">"å¼ é£"</span>,<span class="attr">"age"</span>:<span class="number">22</span>},{<span class="attr">"id"</span>:<span class="number">3</span>,<span class="attr">"name"</span>:<span class="string">"å…³ç¾½"</span>,<span class="attr">"age"</span>:<span class="number">23</span>}]</span><br></pre></td></tr></tbody></table></figure></li></ul><h2 id="äº”ã€RestTemplateç»„ä»¶çš„ä½¿ç”¨"><a href="#äº”ã€RestTemplateç»„ä»¶çš„ä½¿ç”¨" class="headerlink" title="äº”ã€RestTemplateç»„ä»¶çš„ä½¿ç”¨"></a>äº”ã€RestTemplateç»„ä»¶çš„ä½¿ç”¨</h2><h4 id="1-ä»€ä¹ˆæ˜¯RestTemplate"><a href="#1-ä»€ä¹ˆæ˜¯RestTemplate" class="headerlink" title="1.ä»€ä¹ˆæ˜¯RestTemplate?"></a>1.ä»€ä¹ˆæ˜¯RestTemplate?</h4><p>RestTemplateæ˜¯Springæ¡†æ¶æä¾›çš„åŸºäºRESTçš„æœåŠ¡ç»„ä»¶ï¼Œåº•å±‚æ˜¯å¯¹HTTPè¯·æ±‚åŠå“åº”è¿›è¡Œäº†å°è£…ï¼Œæä¾›äº†å¾ˆå¤šè®¿é—®RETSæœåŠ¡çš„æ–¹æ³•ï¼Œå¯ä»¥ç®€åŒ–ä»£ç å¼€å‘ã€‚æ ¹æ®ä¸Šé¢æˆ‘ä»¬çŸ¥é“çš„ï¼Œæ—¢ç„¶æ˜¯å¾®æœåŠ¡ï¼Œé‚£ä¹ˆeurekaclientæ¨¡å—ä¸å¦å¤–ä¸€ä¸ªæ¨¡å—ä¹‹é—´æ˜¯åˆæ˜¯æ€ä¹ˆè°ƒç”¨çš„å‘¢ï¼Ÿæ²¡é”™å°±æ˜¯é€šè¿‡RestTemplateç»„ä»¶æ¥å®ç°çš„æ¨¡å—ä¸æ¨¡å—ä¹‹é—´çš„è°ƒç”¨ï¼Œè¿™æ ·ä»¥æ¥æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡RestTemplateæ¥è°ƒç”¨eurekaclientæ¨¡å—ã€‚</p><h4 id="2-RestTemplateçš„ä½¿ç”¨"><a href="#2-RestTemplateçš„ä½¿ç”¨" class="headerlink" title="2.RestTemplateçš„ä½¿ç”¨"></a>2.RestTemplateçš„ä½¿ç”¨</h4><ul><li><p>åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºresttemplateæ¨¡å—ï¼ˆmavenï¼‰,pom.xmlé…ç½®</p><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>resttemplate<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure></li><li><p>åˆ›å»ºè°ƒç”¨å¦å¤–ä¸€ä¸ªæ¨¡å—æ‰€éœ€çš„å®ä½“ç±»</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.entity;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>springbootå¯åŠ¨ç±»</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestTemplateApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(RestTemplateApplication<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æä¾›RestTemplateå®ä¾‹å°†å…¶æ·»åŠ åˆ°iocå®¹å™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>ç¼–å†™Controllerå±‚</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/rest"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestTmpController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * è°ƒç”¨eurekaclientæ¨¡å—ä¸‹çš„Controlleré‡Œé¢çš„æ¥å£</span></span><br><span class="line"><span class="comment">     * getForEntityä¸­çš„çš„getä¸ºGETè¯·æ±‚,å‚æ•°ä¸€ï¼šè¦è°ƒç”¨çš„åœ°å€ å‚æ•°äºŒï¼šç»“æœé›†</span></span><br><span class="line"><span class="comment">     * restTemplate.getForEntity().getBody()ä½œç”¨ä¸restTemplate.getForObjectï¼ˆï¼‰ä½œç”¨ç›¸åŒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAllR"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>  restTemplate.getForEntity(</span><br><span class="line">            <span class="string">"http://localhost:8010/student/findAll"</span>,                                  Collection<span class="class">.<span class="keyword">class</span>).<span class="title">getBody</span>()</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAllR2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll2</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://localhost:8010/student/findAll"</span>,Collection<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®idæŸ¥è¯¢</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForEntity(<span class="string">"http://localhost:8010/student/findById/"</span>,Student<span class="class">.<span class="keyword">class</span>,<span class="title">id</span>).<span class="title">getBody</span>()</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById2/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById2</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://localhost:8010/student/findById/"</span>,Student<span class="class">.<span class="keyword">class</span>,<span class="title">id</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line"></span><br><span class="line">        restTemplate.postForEntity(<span class="string">"http://localhost:8010/student/save"</span>,student,<span class="keyword">null</span>).getBody();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/save2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save2</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line"></span><br><span class="line">        restTemplate.postForObject(<span class="string">"http://localhost:8010/student/save"</span>,student,<span class="keyword">null</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line">        restTemplate.put(<span class="string">"http://localhost:8010/student/update"</span>,student);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"//deleteById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line">        restTemplate.delete(<span class="string">"http://localhost:8010/student/update"</span>,id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>è¿™é‡Œæ²¡æœ‰é…ç½®é…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰é»˜è®¤ç«¯å£å·ä¸º8080ï¼Œæ¥ç€æŒ‰é¡ºåºå¯åŠ¨é¡¹ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ->eurekaclientæœåŠ¡æä¾›è€…->resttemplateæœåŠ¡æ¶ˆè´¹è€…ï¼‰</p></li><li><p>æµè§ˆå™¨è®¿é—®resttemplateåœ°å€ï¼š<a href="http://localhost:8080/rest/findAllRï¼Œæ˜¾ç¤ºç»“æœï¼š" target="_blank" rel="noopener">http://localhost:8080/rest/findAllRï¼Œæ˜¾ç¤ºç»“æœï¼š</a></p><figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">[{<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"name"</span>:<span class="string">"åˆ˜å¤‡"</span>,<span class="attr">"age"</span>:<span class="number">24</span>},{<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"name"</span>:<span class="string">"å¼ é£"</span>,<span class="attr">"age"</span>:<span class="number">22</span>},{<span class="attr">"id"</span>:<span class="number">3</span>,<span class="attr">"name"</span>:<span class="string">"å…³ç¾½"</span>,<span class="attr">"age"</span>:<span class="number">23</span>}]</span><br></pre></td></tr></tbody></table></figure><p>è¿™é‡Œé€šè¿‡resttemplateæ¶ˆè´¹è€…é‡Œé¢çš„findAllæ–¹æ³•æˆåŠŸè°ƒç”¨äº†eurekaclientæœåŠ¡æä¾›è€…çš„æŸ¥è¯¢æ–¹æ³•ï¼Œå…¶ä»–æ–¹æ³•è‡ªè¡Œæµ‹è¯•ï¼Œæ³¨æ„ï¼šresttemplateå¹¶ä¸ç®—æ˜¯ä¸¥æ ¼çš„æœåŠ¡æ¶ˆè´¹è€…ï¼Œå› ä¸ºå¹¶æ²¡æœ‰å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œ,å®ƒä¸æœåŠ¡æ¶ˆè´¹è€…çš„åŒºåˆ«å°±æ˜¯æ˜¯å¦å‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œ</p></li></ul><h2 id="å…­ã€æœåŠ¡æ¶ˆè´¹è€…Consumerä»£ç å®ç°"><a href="#å…­ã€æœåŠ¡æ¶ˆè´¹è€…Consumerä»£ç å®ç°" class="headerlink" title="å…­ã€æœåŠ¡æ¶ˆè´¹è€…Consumerä»£ç å®ç°"></a>å…­ã€æœåŠ¡æ¶ˆè´¹è€…Consumerä»£ç å®ç°</h2><h4 id="1-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºconsumeræœåŠ¡æ¶ˆè´¹è€…æ¨¡å—ï¼Œpom-xml"><a href="#1-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºconsumeræœåŠ¡æ¶ˆè´¹è€…æ¨¡å—ï¼Œpom-xml" class="headerlink" title="1.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºconsumeræœåŠ¡æ¶ˆè´¹è€…æ¨¡å—ï¼Œpom.xml"></a>1.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºconsumeræœåŠ¡æ¶ˆè´¹è€…æ¨¡å—ï¼Œpom.xml</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>consumer<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--æ·»åŠ ä¾èµ–--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="2-åˆ›å»ºapplication-ymlé…ç½®æ–‡ä»¶"><a href="#2-åˆ›å»ºapplication-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="2.åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶"></a>2.åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#ç«¯å£è‡ªå®šä¹‰</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8020</span></span><br><span class="line"><span class="comment">#åº”ç”¨åå­—</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">consumer</span></span><br><span class="line">    <span class="comment">#æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment">#è¿›è¡Œæ³¨å†Œ</span></span><br></pre></td></tr></tbody></table></figure><h4 id="3-åˆ›å»ºå¯åŠ¨ç±»"><a href="#3-åˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="3.åˆ›å»ºå¯åŠ¨ç±»"></a>3.åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(ConsumerApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æä¾›RestTemplateå®ä¾‹å°†å…¶æ·»åŠ åˆ°iocå®¹å™¨</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="4-åˆ›å»ºå®ä½“ç±»ï¼Œè·Ÿresttemplateæ¨¡å—ä¸€æ ·"><a href="#4-åˆ›å»ºå®ä½“ç±»ï¼Œè·Ÿresttemplateæ¨¡å—ä¸€æ ·" class="headerlink" title="4.åˆ›å»ºå®ä½“ç±»ï¼Œè·Ÿresttemplateæ¨¡å—ä¸€æ ·"></a>4.åˆ›å»ºå®ä½“ç±»ï¼Œè·Ÿresttemplateæ¨¡å—ä¸€æ ·</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.entity;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="5-åˆ›å»ºController-è·Ÿresttemplateæ¨¡å—ä¸€æ ·"><a href="#5-åˆ›å»ºController-è·Ÿresttemplateæ¨¡å—ä¸€æ ·" class="headerlink" title="5.åˆ›å»ºController,è·Ÿresttemplateæ¨¡å—ä¸€æ ·"></a>5.åˆ›å»ºController,è·Ÿresttemplateæ¨¡å—ä¸€æ ·</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/consumer"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * è°ƒç”¨eurekaclientæ¨¡å—ä¸‹çš„Controlleré‡Œé¢çš„æ¥å£</span></span><br><span class="line"><span class="comment">     * getForEntityä¸­çš„çš„getä¸ºGETè¯·æ±‚,å‚æ•°ä¸€ï¼šè¦è°ƒç”¨çš„åœ°å€ å‚æ•°äºŒï¼šç»“æœé›†</span></span><br><span class="line"><span class="comment">     * restTemplate.getForEntity().getBody()ä½œç”¨ä¸restTemplate.getForObjectï¼ˆï¼‰ä½œç”¨ç›¸åŒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAllR"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> restTemplate.getForEntity(<span class="string">"http://localhost:8010/student/findAll"</span>,Collection<span class="class">.<span class="keyword">class</span>).<span class="title">getBody</span>()</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAllR2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll2</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://localhost:8010/student/findAll"</span>,Collection<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ ¹æ®idæŸ¥è¯¢</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForEntity(<span class="string">"http://localhost:8010/student/findById/"</span>,Student<span class="class">.<span class="keyword">class</span>,<span class="title">id</span>).<span class="title">getBody</span>()</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById2/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById2</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://localhost:8010/student/findById/"</span>,Student<span class="class">.<span class="keyword">class</span>,<span class="title">id</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line"></span><br><span class="line">        restTemplate.postForEntity(<span class="string">"http://localhost:8010/student/save"</span>,student,<span class="keyword">null</span>).getBody();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/save2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save2</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line"></span><br><span class="line">       restTemplate.postForObject(<span class="string">"http://localhost:8010/student/save"</span>,student,<span class="keyword">null</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¿®æ”¹</span></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line">        restTemplate.put(<span class="string">"http://localhost:8010/student/update"</span>,student);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"//deleteById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line">        restTemplate.delete(<span class="string">"http://localhost:8010/student/update"</span>,id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="6-æŒ‰é¡ºåºå¯åŠ¨æœåŠ¡ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ-gt-eurekaclientæœåŠ¡æä¾›è€…-gt-consumeræœåŠ¡æ¶ˆè´¹è€…ï¼‰"><a href="#6-æŒ‰é¡ºåºå¯åŠ¨æœåŠ¡ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ-gt-eurekaclientæœåŠ¡æä¾›è€…-gt-consumeræœåŠ¡æ¶ˆè´¹è€…ï¼‰" class="headerlink" title="6.æŒ‰é¡ºåºå¯åŠ¨æœåŠ¡ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ->eurekaclientæœåŠ¡æä¾›è€…->consumeræœåŠ¡æ¶ˆè´¹è€…ï¼‰"></a>6.æŒ‰é¡ºåºå¯åŠ¨æœåŠ¡ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ->eurekaclientæœåŠ¡æä¾›è€…->consumeræœåŠ¡æ¶ˆè´¹è€…ï¼‰</h4><p>æ³¨ï¼šè¿™é‡Œè¯´æ˜ä¸‹consumeræœåŠ¡æ¶ˆè´¹è€…åœ¨æŸäº›æ—¶å€™ä¹Ÿå¯ä»¥å½“æˆæœåŠ¡æä¾›è€…ï¼Œä¸»è¦åŒºåˆ«åœ¨äºè°è°ƒç”¨è°ï¼Œå¦‚æœåè€…è°ƒç”¨å‰è€…ï¼Œé‚£ä¹ˆåè€…å°±æ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼Œå‰è€…æ˜¯æœåŠ¡æä¾›è€…ï¼Œåä¹‹ï¼Œå‰è€…æ˜¯æœåŠ¡æ¶ˆè´¹è€…ï¼Œåè€…æ˜¯æœåŠ¡æä¾›è€…ã€‚</p><h4 id="7-æµè§ˆå™¨è¾“å…¥eurekaserveræ³¨å†Œä¸­å¿ƒåœ°å€ï¼šhttp-localhost-8761"><a href="#7-æµè§ˆå™¨è¾“å…¥eurekaserveræ³¨å†Œä¸­å¿ƒåœ°å€ï¼šhttp-localhost-8761" class="headerlink" title="7.æµè§ˆå™¨è¾“å…¥eurekaserveræ³¨å†Œä¸­å¿ƒåœ°å€ï¼šhttp://localhost:8761/"></a>7.æµè§ˆå™¨è¾“å…¥eurekaserveræ³¨å†Œä¸­å¿ƒåœ°å€ï¼š<a href="http://localhost:8761/" target="_blank" rel="noopener">http://localhost:8761/</a></h4><p><img src="https://i.loli.net/2020/05/06/p3eXzPrK8ulSMna.png" alt="1588582648490"></p><p>å¯ä»¥çœ‹åˆ°æˆåŠŸæ³¨å†Œäº†æœåŠ¡æ¶ˆè´¹è€…å’ŒæœåŠ¡æä¾›è€…ï¼Œæ¥ä¸‹æ¥åªéœ€è¦æœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨æœåŠ¡æä¾›è€…ã€‚</p><h4 id="8-è¾“å…¥åœ°å€è°ƒç”¨æœåŠ¡æä¾›è€…ï¼šhttp-localhost-8020-consumer-findAllR"><a href="#8-è¾“å…¥åœ°å€è°ƒç”¨æœåŠ¡æä¾›è€…ï¼šhttp-localhost-8020-consumer-findAllR" class="headerlink" title="8.è¾“å…¥åœ°å€è°ƒç”¨æœåŠ¡æä¾›è€…ï¼šhttp://localhost:8020/consumer/findAllR"></a>8.è¾“å…¥åœ°å€è°ƒç”¨æœåŠ¡æä¾›è€…ï¼š<a href="http://localhost:8020/consumer/findAllR" target="_blank" rel="noopener">http://localhost:8020/consumer/findAllR</a></h4><figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">[{<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"name"</span>:<span class="string">"åˆ˜å¤‡"</span>,<span class="attr">"age"</span>:<span class="number">24</span>},{<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"name"</span>:<span class="string">"å¼ é£"</span>,<span class="attr">"age"</span>:<span class="number">22</span>},{<span class="attr">"id"</span>:<span class="number">3</span>,<span class="attr">"name"</span>:<span class="string">"å…³ç¾½"</span>,<span class="attr">"age"</span>:<span class="number">23</span>}]</span><br></pre></td></tr></tbody></table></figure><p>å…¶ä»–æ–¹æ³•è‡ªè¡Œæµ‹è¯•</p><blockquote><p>å£°æ˜ï¼šæ­¤æ–‡ç« æ˜¯ç»“åˆBç«™â€™æ¥ å“¥æ•™ä½ å­¦Javaâ€™è§†é¢‘è‡ªå·±æ•´ç†å‡ºæ¥çš„ç¬”è®°ï¼Œå¦‚æœ‰ä¸æ¸…æ¥šçš„å¯ä»¥å»çœ‹æ¥ å“¥è§†é¢‘ã€‚</p></blockquote><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>springCloud</category>
      </categories>
      <tags>
        <tag>å¾®æœåŠ¡</tag>
        <tag>springCloud</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¹‹JDKã€Tomcatå®‰è£…åŠç¯å¢ƒé…ç½®</title>
    <url>/el/20/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/04/28/HtCAO1msxLr6vUX.png"><a id="more"></a><p>åœ¨è¿™é‡Œåªä»‹ç»linuxä¸‹ç›¸å…³è½¯ä»¶å®‰è£…åŠç¯å¢ƒé…ç½®ï¼Œè‡³äºlinuxçš„åŸºæœ¬çŸ¥è¯†å’ŒåŸç†å¯ä»¥ç™¾åº¦å“ˆã€‚</p><p>é¦–å…ˆåœ¨linuxä¸Šæœ‰ä¸‰ç§å®‰è£…è½¯ä»¶çš„æ–¹å¼åˆ†åˆ«æ˜¯ï¼š</p><div class="note info no-icon"><p>rpmå®‰è£…<br>è§£å‹ç¼©å®‰è£…<br>yumå®‰è£…</p></div><h3 id="JDKå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰"><a href="#JDKå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰" class="headerlink" title="JDKå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰"></a>JDKå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰</h3><ol><li>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©rpmå®‰è£…jdk</li></ol><ul><li><p>åœ¨windowä¸Šä¸‹è½½rpmåŒ…ï¼Œç™¾åº¦jdk rpmå³å¯</p></li><li><p>å¦‚æœæ˜¯è‡ªå·±ä¹°çš„æœåŠ¡å™¨å¯ä»¥ç”¨xshellè¿œç¨‹è¿æ¥æœåŠ¡å™¨ï¼Œç„¶åç”¨xftpå°†rpmåŒ…ä¸Šä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨/usr/libç›®å½•ä¸‹æˆ–è€…è™šæ‹Ÿæœº</p><p>è¿™é‡Œæ¨èè¿˜æ˜¯åœ¨æœåŠ¡å™¨/usr/libç›®å½•ä¸‹æ–°å»ºjavaç›®å½•,å°†rpmä¸Šä¼ åœ¨javaç›®å½•</p></li></ul><ol start="2"><li><p>æ£€æŸ¥æœ¬åœ°æ˜¯å¦æœ‰å®‰è£…è¿‡jdk</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">"1.8.0_121"</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_121-b13)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)</span><br><span class="line"><span class="comment"># æ£€æŸ¥æœåŠ¡å™¨æœ¬åœ°çš„jdkçš„ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"># -qa åˆ—å‡ºæ‰€æœ‰åŒ…</span></span><br><span class="line"><span class="comment"># |grep æ˜¯å¦åŒ…å«æŸä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">[root@localhost /]<span class="comment"># rpm -qa|grep jdk</span></span><br><span class="line">jdk1.8.0_121-1.8.0_121-fcs.x86_64</span><br><span class="line"><span class="comment"># å¸è½½ -e</span></span><br><span class="line"><span class="comment"># å¼ºåˆ¶åˆ é™¤ --nodeps ï¼ˆå¯é€‰ï¼‰</span></span><br><span class="line">[root@localhost /]<span class="comment"># rpm -e --nodeps jdk1.8.0_121-1.8.0_121-fcs.x86_64</span></span><br><span class="line"><span class="comment">#å¸è½½åæŸ¥çœ‹æ˜¯å¦è¿˜æœ‰jdkç‰ˆæœ¬</span></span><br><span class="line">[root@localhost /]<span class="comment"># java -version</span></span><br><span class="line">-bash: /usr/bin/java: No such file or directory</span><br></pre></td></tr></tbody></table></figure></li><li><p>å®‰è£…JDK</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…java rpm</span></span><br><span class="line">[root@localhost /]<span class="comment"># cd /usr/lib/java</span></span><br><span class="line"><span class="comment"># i å®‰è£…</span></span><br><span class="line"><span class="comment"># v æ˜¾ç¤ºå®‰è£…è¿‡ç¨‹</span></span><br><span class="line"><span class="comment"># h æ˜¾ç¤ºè¿›åº¦</span></span><br><span class="line">[root@localhost java]<span class="comment"># rpm -ivh jdk-8u221-linux-x64.rpm</span></span><br><span class="line"><span class="comment">#æœ‰é€‰æ‹©æ—¶ï¼Œé€‰æ‹©y</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>é…ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">[root@localhost java]<span class="comment"># cd /</span></span><br><span class="line"><span class="comment">#vim ç¼–è¾‘</span></span><br><span class="line">[root@localhost /]<span class="comment">#vim /etc/profile</span></span><br><span class="line"><span class="comment">#åœ¨æ–‡æœ¬æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹</span></span><br><span class="line">JAVA_HOME=/usr/lib/java/jdk1.8.0_221-amd64</span><br><span class="line">CLASSPATH=%JAVA_HOME%/lib:%JAVA_HOME%/jre/lib</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$JAVA_HOME</span>/jre/bin</span><br><span class="line"><span class="built_in">export</span> PATH CLASSPATH JAVA_HOME</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç¼–è¾‘åæŒ‰ESCè¾“å…¥å†’å·ï¼ˆ:ï¼‰ç„¶åwqå›è½¦</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>éªŒè¯</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</span></span><br><span class="line">[root@localhost /]<span class="comment"># source /etc/profile</span></span><br><span class="line">[root@localhost /]<span class="comment"># Java</span></span><br></pre></td></tr></tbody></table></figure></li></ol><h3 id="Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰"><a href="#Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰" class="headerlink" title="Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰"></a>Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰</h3><ol><li>è¿™é‡Œé€‰æ‹©è§£å‹ç¼©å®‰è£…Tomcat</li></ol><ul><li>ä¸‹è½½åç¼€ä¸ºtar.gzçš„tomcatåŒ…</li><li>ä½¿ç”¨xshellå°†åŒ…è‡³äº/usr/lib/tomcatï¼Œæ²¡æœ‰è¿™ä¸ªç›®å½•è‡ªè¡Œæ–°å»º</li></ul><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># cd /usr/lib/tomcat</span></span><br><span class="line">[root@localhost tomcat]<span class="comment"># ls</span></span><br><span class="line">apache-tomcat-9.0.22.tar.gz</span><br><span class="line"> <span class="comment"># è§£å‹</span></span><br><span class="line">[root@localhost tomcat]<span class="comment"># tar -zxvf apache-tomcat-9.0.22.tar.gz</span></span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>è¿è¡ŒTomcatï¼Œè¿›å…¥binç›®å½•ï¼Œå¦‚åŒåœ¨Windowsä¸‹çš„æ“ä½œ</li></ol><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨tomcat</span></span><br><span class="line">[root@localhost bin]<span class="comment"># ./startup.sh</span></span><br><span class="line"><span class="comment"># å…³é—­tomcat</span></span><br><span class="line">[root@localhost bin]<span class="comment"># ./shutdown.sh</span></span><br></pre></td></tr></tbody></table></figure><ol start="3"><li>æ‰“å¼€Linuxçš„é˜²ç«å¢™ç«¯å£ï¼Œå¦‚æœæ˜¯é˜¿é‡Œäº‘ï¼Œéœ€è¦é˜¿é‡Œäº‘çš„å®‰å…¨ç»„ç­–ç•¥ï¼ˆåªæœ‰è¿™ä¸ªå¼€æ”¾æ‰æ˜¯çœŸæ­£çš„è¢«è®¿é—®ï¼‰æ˜¯å¼€æ”¾çš„</li></ol><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹firewallæœåŠ¡çŠ¶æ€</span></span><br><span class="line">[root@localhost /]<span class="comment"># systemctl status firewalld</span></span><br><span class="line"><span class="comment"># firewallæœåŠ¡å¼€å¯</span></span><br><span class="line">[root@localhost /]<span class="comment"># service firewalld start</span></span><br><span class="line"><span class="comment"># firewallæœåŠ¡é‡å¯</span></span><br><span class="line">[root@localhost /]<span class="comment"># service firewalld restart</span></span><br><span class="line"><span class="comment"># firewallæœåŠ¡å…³é—­</span></span><br><span class="line">[root@localhost /]<span class="comment"># service firewalld stop</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line">[root@localhost /]<span class="comment"># firewall-cmd --list-all    # æŸ¥çœ‹å…¨éƒ¨ä¿¡æ¯</span></span><br><span class="line">[root@localhost /]<span class="comment"># firewall-cmd --list-ports  # åªçœ‹ç«¯å£ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯ç«¯å£</span></span><br><span class="line"><span class="comment"># --zone ä½œç”¨åŸŸ</span></span><br><span class="line"><span class="comment"># --add-port=80/tcp  æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®</span></span><br><span class="line"><span class="comment"># --permanent   æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ</span></span><br><span class="line">[root@localhost /]<span class="comment"># firewall-cmd --zone=public --add-port=80/tcp --permanent</span></span><br><span class="line"><span class="comment"># é‡å¯é˜²ç«å¢™ï¼š</span></span><br><span class="line">[root@localhost /]<span class="comment"># systemctl restart firewalld.service</span></span><br></pre></td></tr></tbody></table></figure><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>jdk</tag>
        <tag>Tomcat</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHubé«˜æ•ˆæŸ¥è¯¢å¼€æºé¡¹ç›®</title>
    <url>/github/20/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/04/28/PrhQIK3kY1JbzTa.png"><a id="more"></a><h5 id="å¦‚ä½•åœ¨githubä¸Šå¯»æ‰¾æœ€é€‚åˆè‡ªå·±çš„é¡¹ç›®å‘¢ï¼Ÿ"><a href="#å¦‚ä½•åœ¨githubä¸Šå¯»æ‰¾æœ€é€‚åˆè‡ªå·±çš„é¡¹ç›®å‘¢ï¼Ÿ" class="headerlink" title="å¦‚ä½•åœ¨githubä¸Šå¯»æ‰¾æœ€é€‚åˆè‡ªå·±çš„é¡¹ç›®å‘¢ï¼Ÿ"></a>å¦‚ä½•åœ¨githubä¸Šå¯»æ‰¾æœ€é€‚åˆè‡ªå·±çš„é¡¹ç›®å‘¢ï¼Ÿ</h5><ol><li><p>é¦–å…ˆä½ å¯ä»¥æ ¹æ®åå­—æœç´¢ä½ æƒ³è¦çš„é¡¹ç›®<br>in:name é¡¹ç›®å</p></li><li><p>å½“ä½ ç”¨åå­—æœç´¢å‡ºæ¥æ—¶å‡ºç°å‡ ä¸‡ä¸ªé¡¹ç›®ï¼Œè¿™æ—¶ä½ ä¸çŸ¥é“å¦‚ä½•é€‰æ‹©å¯ä»¥å†é™åˆ¶æ˜Ÿæ˜Ÿæ•°é‡æ¥ç¼©å°èŒƒå›´<br>stars:>æ•°é‡</p></li><li><p>æ­¤æ—¶å‡ºç°çš„é¡¹ç›®è¿˜æ˜¯å¾ˆå¤šï¼Œå¹¶ä¸”å³å¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æ—¶ä½ å¯ä»¥å†æ¬¡é™åˆ¶è¯­è¨€èŒƒå›´<br>language:è¯­è¨€</p></li><li><p>ä½ éœ€è¦æ‰¾æ€æ ·çš„é¡¹ç›®å‘¢ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ®é¡¹ç›®æè¿°æœç´¢<br>in:description æè¿°</p></li><li><p>ä½ åˆæ„Ÿè§‰æœ‰äº›é¡¹ç›®å¤ªæ—§äº†ï¼Œäºæ˜¯æƒ³æ‰¾ä¸€ä»½æ–°çš„<br>pushed:>å¹´ä»½</p></li><li><p>è¿˜å¯ä»¥æ ¹æ®readmeè¿›è¡Œæœç´¢<br>in:readme æè¿°</p></li><li><p>å®ä¾‹å¦‚ä¸‹ï¼š<br>ç»„åˆæœç´¢<br><img src="https://i.loli.net/2020/04/28/f3joacR6hzYinFN.png" alt><br>æœç´¢ç»“æœå¦‚ä¸‹<br><img src="https://i.loli.net/2020/04/28/9qnw6h4QXTafIrV.png" alt><br>æˆ‘ä»¬çœ‹å‡ºæ ¹æ®é™åˆ¶æ¡ä»¶é¡¹ç›®æ•°é‡æ˜æ˜¾å‡å°‘ï¼Œè¿™æ ·ä¸€æ¥å¯ä»¥å‡å°‘æˆ‘ä»¬æµªè´¹å¤§é‡çš„æ—¶é—´å»æœç´¢ä¸€äº›æ— ç”¨è€Œåˆä¸é€‚åˆè‡ªå·±çš„é¡¹ç›®ï¿½æœç´¢ä¸€äº›æ— ç”¨è€Œåˆä¸é€‚åˆè‡ªå·±çš„é¡¹ç›®</p></li></ol><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>github</category>
      </categories>
      <tags>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title>èŠä¸€èŠå¾®æœåŠ¡ï¼ˆä¸‹ï¼‰</title>
    <url>/service2/20/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/05/06/TVG52RcIoYkU6Km.jpg"><a id="more"></a><h2 id="ä¸ƒã€æœåŠ¡ç½‘å…³"><a href="#ä¸ƒã€æœåŠ¡ç½‘å…³" class="headerlink" title="ä¸ƒã€æœåŠ¡ç½‘å…³"></a>ä¸ƒã€æœåŠ¡ç½‘å…³</h2><h4 id="1-ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘å…³ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘å…³ï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘å…³ï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘å…³ï¼Ÿ</h4><p>æœåŠ¡ç½‘å…³ = è·¯ç”±è½¬å‘ + è¿‡æ»¤å™¨,åœ¨ä¸€å¼€å§‹ä¹Ÿæœ‰æåˆ°è¿‡ï¼Œå½“å®¢æˆ·ç«¯è¦è¯·æ±‚ä¸€ä¸ªç³»ç»Ÿä¸­çš„å¤šä¸ªå¾®æœåŠ¡æ—¶ï¼Œè¿™æ—¶æœ‰å¤šä¸ªå¾®æœåŠ¡ï¼ˆæ¨¡å—ï¼‰å°±è¦è¯·æ±‚å‡ æ¬¡ï¼Œæ˜æ˜¾è¿™æ ·ä¸åˆ©äºç®¡ç†ï¼Œäºæ˜¯å‡ºç°å°±åŠ å…¥äº†æœåŠ¡ç½‘å…³ï¼Œåªéœ€è¦å®¢æˆ·ç«¯ä¸ç½‘å…³äº¤äº’ï¼Œç„¶åç”±ç½‘å…³æ¥è¿›è¡Œè¯·æ±‚è½¬å‘ã€‚</p><p><img src="https://i.loli.net/2020/05/06/X2yO9eRWGmhaLdF.png" alt="1588587290249"></p><h4 id="2-Spring-Cloudé›†æˆäº†Zuulç»„ä»¶ï¼Œå®ç°æœåŠ¡ç½‘å…³ã€‚"><a href="#2-Spring-Cloudé›†æˆäº†Zuulç»„ä»¶ï¼Œå®ç°æœåŠ¡ç½‘å…³ã€‚" class="headerlink" title="2.Spring Cloudé›†æˆäº†Zuulç»„ä»¶ï¼Œå®ç°æœåŠ¡ç½‘å…³ã€‚"></a>2.Spring Cloudé›†æˆäº†Zuulç»„ä»¶ï¼Œå®ç°æœåŠ¡ç½‘å…³ã€‚</h4><ul><li><p>ä»€ä¹ˆæ˜¯Zuul?</p><p>Zuulæ˜¯Netflixæä¾›çš„ä¸€ä¸ªå¼€æºçš„APIç½‘å…³æœåŠ¡å™¨ï¼Œæ˜¯å®¢æˆ·ç«¯å’Œç½‘ç«™åç«¯æ‰€æœ‰è¯·æ±‚çš„ä¸­é—´å±‚ï¼Œå¯¹å¤–å¼€æ”¾-ä¸ªAPI,å°†æ‰€æœ‰è¯·æ±‚å¯¼å…¥ç»Ÿ- -çš„å…¥å£ï¼Œ å±è”½äº†æœåŠ¡ç«¯çš„å…·ä½“å®ç°é€»è¾‘ï¼ŒZuul å¯ä»¥å®ç°åå‘ä»£ç†çš„åŠŸèƒ½ï¼Œåœ¨ç½‘å…³å†…éƒ¨å®ç°åŠ¨æ€è·¯ç”±ã€èº«ä»½è®¤è¯ã€IP è¿‡æ»¤ã€æ•°æ®ç›‘æ§ç­‰,å¹¶ä¸”Zuulè¿˜è‡ªå¸¦äº†è´Ÿè½½å‡è¡¡åŠŸèƒ½ã€‚</p></li></ul><h4 id="3-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºmavenå·¥ç¨‹zuulï¼Œpom-xmlé…ç½®"><a href="#3-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºmavenå·¥ç¨‹zuulï¼Œpom-xmlé…ç½®" class="headerlink" title="3.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºmavenå·¥ç¨‹zuulï¼Œpom.xmlé…ç½®"></a>3.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºmavenå·¥ç¨‹zuulï¼Œpom.xmlé…ç½®</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>zuul<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">   <span class="comment"><!--zuulç»„ä»¶ä¹Ÿéœ€è¦æ³¨å†Œï¼Œå¼•å…¥client--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="comment"><!--zuulä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-zuul<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="4-åˆ›å»ºapplication-ymlé…ç½®æ–‡ä»¶"><a href="#4-åˆ›å»ºapplication-ymlé…ç½®æ–‡ä»¶" class="headerlink" title="4.åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶"></a>4.åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è‡ªå®šä¹‰ç«¯å£</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8030</span></span><br><span class="line">  <span class="comment">#åç§°</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span></span><br><span class="line"><span class="comment">#æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaulttZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line"><span class="attr">zuul:</span></span><br><span class="line">  <span class="attr">routes:</span></span><br><span class="line">    <span class="attr">provider:</span> <span class="string">/p/**</span> <span class="comment">#ç»™æœåŠ¡æä¾›è€…providerè®¾ç½®æ˜ å°„ï¼Œåé¢è®¿é—®å°±å¯ä»¥é€šè¿‡/p/**æ¥ç›´æ¥è®¿é—®è€Œä¸éœ€è¦ç«¯å£å·å»è®¿é—®</span></span><br></pre></td></tr></tbody></table></figure><h4 id="5-åˆ›å»ºå¯åŠ¨ç±»"><a href="#5-åˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="5.åˆ›å»ºå¯åŠ¨ç±»"></a>5.åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.EnableAutoConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.zuul.EnableZuulProxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@EnableZuulProxy</span>ï¼šåŒ…å«äº†EnableZuulServer,è®¾ç½®è¯¥ç±»æ˜¯ç½‘å…³çš„å¯åŠ¨ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@EnableAutoConfiguration</span>: å¯ä»¥å¸®åŠ©Spring Bootåº”ç”¨å°†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„<span class="doctag">@Configuration</span>é…ç½®åŠ è½½åˆ°å½“å‰Spring Bootåˆ›å»ºå¹¶ä½¿ç”¨çš„loCå®¹å™¨ä¸­ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableZuulProxy</span></span><br><span class="line"><span class="meta">@EnableAutoConfiguration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZuulApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(ZuulApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="6-æŒ‰é¡ºåºå¯åŠ¨ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ-gt-eurekaclientæœåŠ¡æä¾›è€…-gt-zuulæœåŠ¡ç½‘å…³ï¼‰"><a href="#6-æŒ‰é¡ºåºå¯åŠ¨ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ-gt-eurekaclientæœåŠ¡æä¾›è€…-gt-zuulæœåŠ¡ç½‘å…³ï¼‰" class="headerlink" title="6.æŒ‰é¡ºåºå¯åŠ¨ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ->eurekaclientæœåŠ¡æä¾›è€…->zuulæœåŠ¡ç½‘å…³ï¼‰"></a>6.æŒ‰é¡ºåºå¯åŠ¨ï¼ˆeurekaserveræ³¨å†Œä¸­å¿ƒ->eurekaclientæœåŠ¡æä¾›è€…->zuulæœåŠ¡ç½‘å…³ï¼‰</h4><h4 id="7-æµè§ˆå™¨è¾“å…¥ï¼šhttp-localhost-8030-p-student-findAll-é€šè¿‡æœåŠ¡ç½‘å…³çš„ç«¯å£å»è®¿é—®ä»»ä½•ä¸€ä¸ªæœåŠ¡æä¾›è€…ï¼Œè¿”å›ç»“æœ"><a href="#7-æµè§ˆå™¨è¾“å…¥ï¼šhttp-localhost-8030-p-student-findAll-é€šè¿‡æœåŠ¡ç½‘å…³çš„ç«¯å£å»è®¿é—®ä»»ä½•ä¸€ä¸ªæœåŠ¡æä¾›è€…ï¼Œè¿”å›ç»“æœ" class="headerlink" title="7.æµè§ˆå™¨è¾“å…¥ï¼šhttp://localhost:8030/p/student/findAll, é€šè¿‡æœåŠ¡ç½‘å…³çš„ç«¯å£å»è®¿é—®ä»»ä½•ä¸€ä¸ªæœåŠ¡æä¾›è€…ï¼Œè¿”å›ç»“æœ"></a>7.æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:8030/p/student/findAll" target="_blank" rel="noopener">http://localhost:8030/p/student/findAll</a>, é€šè¿‡æœåŠ¡ç½‘å…³çš„ç«¯å£å»è®¿é—®ä»»ä½•ä¸€ä¸ªæœåŠ¡æä¾›è€…ï¼Œè¿”å›ç»“æœ</h4><figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">[{<span class="attr">"id"</span>:<span class="number">1</span>,<span class="attr">"name"</span>:<span class="string">"åˆ˜å¤‡"</span>,<span class="attr">"age"</span>:<span class="number">24</span>},{<span class="attr">"id"</span>:<span class="number">2</span>,<span class="attr">"name"</span>:<span class="string">"å¼ é£"</span>,<span class="attr">"age"</span>:<span class="number">22</span>},{<span class="attr">"id"</span>:<span class="number">3</span>,<span class="attr">"name"</span>:<span class="string">"å…³ç¾½"</span>,<span class="attr">"age"</span>:<span class="number">23</span>}]</span><br></pre></td></tr></tbody></table></figure><h2 id="å…«ã€Ribbonå®ç°è´Ÿè½½å‡è¡¡"><a href="#å…«ã€Ribbonå®ç°è´Ÿè½½å‡è¡¡" class="headerlink" title="å…«ã€Ribbonå®ç°è´Ÿè½½å‡è¡¡"></a>å…«ã€Ribbonå®ç°è´Ÿè½½å‡è¡¡</h2><h4 id="1-ä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Ÿ</h4><p>å°†è´Ÿè½½ï¼ˆå·¥ä½œä»»åŠ¡ï¼Œè®¿é—®è¯·æ±‚ï¼‰è¿›è¡Œå¹³è¡¡ã€åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒï¼ˆæœåŠ¡å™¨ï¼Œç»„ä»¶ï¼‰ä¸Šè¿›è¡Œæ‰§è¡Œã€‚æ˜¯è§£å†³é«˜æ€§èƒ½ï¼Œå•ç‚¹æ•…éšœï¼ˆé«˜å¯ç”¨ï¼‰ï¼Œæ‰©å±•æ€§ï¼ˆæ°´å¹³ä¼¸ç¼©ï¼‰çš„ç»ˆæè§£å†³æ–¹æ¡ˆï¼Œç®€å•è®²å°±æ˜¯ä¸€ä¸ªäººå°†æ¯æ¬¡åˆ°æ¥çš„ä¸€ä¸ªä»»åŠ¡éšæœºå‡è¡¡åˆ†é…ç»™å¤šä¸ªäººæ¥å®Œæˆï¼Œè¿™æ ·æ¥è¾¾åˆ°å‡è½»äººçš„å·¥ä½œå‹åŠ›ï¼Œè¿™é‡Œçš„â€ä»»åŠ¡â€è¡¨ç¤ºè¯·æ±‚ï¼Œâ€äººâ€è¡¨ç¤ºæœåŠ¡å™¨ã€‚</p><h4 id="2-ä»€ä¹ˆæ˜¯Ribbonï¼Ÿ"><a href="#2-ä»€ä¹ˆæ˜¯Ribbonï¼Ÿ" class="headerlink" title="2.ä»€ä¹ˆæ˜¯Ribbonï¼Ÿ"></a>2.ä»€ä¹ˆæ˜¯Ribbonï¼Ÿ</h4><p>Spring Cloud Ribbonæ˜¯ä¸€ä¸ªè´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼ŒRibbonæ˜¯Netfixå…¬å¸å‘å¸ƒçš„è´Ÿè½½å‡è¡¡å™¨ï¼Œè€ŒSpringCloudè¿›è¡Œäº†æ•´åˆï¼Œæ˜¯åŸºäºNetfix Ribbonå®ç°çš„ï¼Œæ˜¯ä¸€ä¸ªç”¨äºå¯¹HTTPè¯·æ±‚è¿›è¡Œæ§åˆ¶çš„è´Ÿè½½å‡è¡¡å®¢æˆ·ç«¯ã€‚åœ¨æ³¨å†Œä¸­å¿ƒå¯¹Ribbonè¿›è¡Œæ³¨å†Œä¹‹åï¼ŒRibonå°±å¯ä»¥åŸºäºæŸç§å‡è¡¡ç®—æ³•ã€å¦‚è½®è¯¢ã€éšæœºã€åŠ æƒè½®è¯¢ã€åŠ æƒéšæœºç­‰è‡ªåŠ¨å¸®åŠ©æœåŠ¡æ¶ˆè´¹è€…è°ƒç”¨æ¥å£ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰Ribbonè´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå®é™…å¼€å‘ä¸­ï¼ŒSpring Cloud Ribbonéœ€è¦ç»“åˆSpring Cloud Eurekaæ¥ä½¿ç”¨ï¼ŒEureka Serveræä¾›æ‰€æœ‰å¯ä»¥è°ƒç”¨çš„æœåŠ¡æä¾›è€…åˆ—è¡¨ï¼Œ RibbonåŸºäºç‰¹å®šçš„è´Ÿè½½å‡è¡¡ç®—æ³•ä»è¿™äº›æœåŠ¡æä¾›è€…ä¸­é€‰æ‹©è¦è°ƒç”¨çš„å…·ä½“å®ä¾‹ã€‚</p><p><img src="https://i.loli.net/2020/05/06/GJrciZ9xlFKjBwy.png" alt="1588597010570"></p><h4 id="3-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºMavenå·¥ç¨‹ï¼Œpom-xmlé…ç½®"><a href="#3-åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºMavenå·¥ç¨‹ï¼Œpom-xmlé…ç½®" class="headerlink" title="3.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºMavenå·¥ç¨‹ï¼Œpom.xmlé…ç½®"></a>3.åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºMavenå·¥ç¨‹ï¼Œpom.xmlé…ç½®</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>ribbon<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--æ‰€éœ€çš„eureka-clientä¾èµ–--></span></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="4-åˆ›å»ºapplication-ymlé…ç½®æ–‡ä»¶-1"><a href="#4-åˆ›å»ºapplication-ymlé…ç½®æ–‡ä»¶-1" class="headerlink" title="4.åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶"></a>4.åˆ›å»ºapplication.ymlé…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#ç«¯å£</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8040</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å½“å‰æœåŠ¡æ³¨å†Œåœ¨Eureka Serverä¸Šçš„åç§°</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">ribbon</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ³¨å†Œä¸­å¿ƒè®¿é—®åœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span> <span class="comment">#æ˜¯å¦å°†å½“å‰æœåŠ¡çš„ipæ³¨å†Œåˆ°EurekaServer</span></span><br></pre></td></tr></tbody></table></figure><h4 id="5-åˆ›å»ºå¯åŠ¨ç±»-1"><a href="#5-åˆ›å»ºå¯åŠ¨ç±»-1" class="headerlink" title="5.åˆ›å»ºå¯åŠ¨ç±»"></a>5.åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.loadbalancer.LoadBalanced;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RibbonApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(RibbonApplication<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@LoadBalanced</span> <span class="comment">//å¼€å¯è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RestTemplate <span class="title">restTemplate</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> RestTemplate();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="6-ä¿®æ”¹eurekaclientæ¨¡å—çš„Ctrollerå±‚"><a href="#6-ä¿®æ”¹eurekaclientæ¨¡å—çš„Ctrollerå±‚" class="headerlink" title="6.ä¿®æ”¹eurekaclientæ¨¡å—çš„Ctrollerå±‚"></a>6.ä¿®æ”¹eurekaclientæ¨¡å—çš„Ctrollerå±‚</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.dao.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/student"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentController</span> </span>{</span><br><span class="line">    <span class="comment">//å½“å‰ç«¯å£å·ï¼Œä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ç«¯å£å·</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"${server.port}"</span>)</span><br><span class="line">    <span class="keyword">private</span> String port;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">findById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line">        studentRepository.saveOrUpdate(student);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span>(<span class="string">"/update"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(@RequestBody Student student)</span></span>{</span><br><span class="line">        studentRepository.saveOrUpdate(student);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping</span>(<span class="string">"/deleteById/{id}"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteById</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> <span class="keyword">long</span> id)</span>{</span><br><span class="line">        studentRepository.deleteById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•è´Ÿè½½å‡è¡¡ï¼ˆéœ€è¦æ·»åŠ çš„åœ°æ–¹ï¼‰</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/port"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">port</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"å½“å‰ç«¯å£"</span>+<span class="keyword">this</span>.port;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="7-åˆ›å»ºCtrollerå±‚"><a href="#7-åˆ›å»ºCtrollerå±‚" class="headerlink" title="7.åˆ›å»ºCtrollerå±‚"></a>7.åˆ›å»ºCtrollerå±‚</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/ribbon"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RibbonController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * è°ƒç”¨eurekaclientæ¨¡å—ä¸‹çš„Controlleré‡Œé¢çš„æ¥å£</span></span><br><span class="line"><span class="comment">     * getForEntityä¸­çš„çš„getä¸ºGETè¯·æ±‚,å‚æ•°ä¸€ï¼šè¦è°ƒç”¨çš„åœ°å€ å‚æ•°äºŒï¼šç»“æœé›†</span></span><br><span class="line"><span class="comment">     * restTemplate.getForEntity().getBody()ä½œç”¨ä¸restTemplate.getForObjectï¼ˆï¼‰ä½œç”¨ç›¸åŒ</span></span><br><span class="line"><span class="comment">     * ç”¨æœåŠ¡æä¾›è€…åå­—provideræ›¿æ¢localhost:8010</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll2</span><span class="params">()</span></span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://provider/student/findAll"</span>,Collection<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/port"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">port</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(<span class="string">"http://provider/student/port"</span>, String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="8-ä¾æ¬¡å¼€å¯æœåŠ¡ï¼šeurekaServeræ³¨å†Œä¸­å¿ƒ-gt-eurekaclientæœåŠ¡æä¾›è€…-8080-gt-eurekaclientæœåŠ¡æä¾›è€…-8081-gt-Ribbon"><a href="#8-ä¾æ¬¡å¼€å¯æœåŠ¡ï¼šeurekaServeræ³¨å†Œä¸­å¿ƒ-gt-eurekaclientæœåŠ¡æä¾›è€…-8080-gt-eurekaclientæœåŠ¡æä¾›è€…-8081-gt-Ribbon" class="headerlink" title="8.ä¾æ¬¡å¼€å¯æœåŠ¡ï¼šeurekaServeræ³¨å†Œä¸­å¿ƒ->eurekaclientæœåŠ¡æä¾›è€…(8080)->eurekaclientæœåŠ¡æä¾›è€…(8081)->Ribbon"></a>8.ä¾æ¬¡å¼€å¯æœåŠ¡ï¼šeurekaServeræ³¨å†Œä¸­å¿ƒ->eurekaclientæœåŠ¡æä¾›è€…(8080)->eurekaclientæœåŠ¡æä¾›è€…(8081)->Ribbon</h4><p>æ³¨ï¼šè¿™é‡Œå¼€å¯çš„æ˜¯ä¸¤ä¸ªæœåŠ¡æä¾›è€…ç«¯å£å·ä¸åŒ</p><h4 id="9-æµè§ˆå™¨è¾“å…¥ï¼šhttp-localhost-8040-ribbon-portï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æ£€éªŒæŸ¥è¯¢æ–¹æ³•ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯ä¸ºäº†èƒ½ç›´è§‚çš„çœ‹åˆ°æ•ˆæœ"><a href="#9-æµè§ˆå™¨è¾“å…¥ï¼šhttp-localhost-8040-ribbon-portï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æ£€éªŒæŸ¥è¯¢æ–¹æ³•ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯ä¸ºäº†èƒ½ç›´è§‚çš„çœ‹åˆ°æ•ˆæœ" class="headerlink" title="9.æµè§ˆå™¨è¾“å…¥ï¼šhttp://localhost:8040/ribbon/portï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æ£€éªŒæŸ¥è¯¢æ–¹æ³•ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯ä¸ºäº†èƒ½ç›´è§‚çš„çœ‹åˆ°æ•ˆæœ"></a>9.æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:8040/ribbon/portï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æ£€éªŒæŸ¥è¯¢æ–¹æ³•ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯ä¸ºäº†èƒ½ç›´è§‚çš„çœ‹åˆ°æ•ˆæœ" target="_blank" rel="noopener">http://localhost:8040/ribbon/portï¼Œè¿™é‡Œä¹Ÿå¯ä»¥æ£€éªŒæŸ¥è¯¢æ–¹æ³•ï¼Œè¿™é‡Œå±•ç¤ºçš„æ˜¯ä¸ºäº†èƒ½ç›´è§‚çš„çœ‹åˆ°æ•ˆæœ</a></h4><p>ç›®çš„æ˜¯æ£€éªŒè´Ÿè½½å‡è¡¡ï¼Œè¿™æ—¶ä¼šæ˜¾ç¤ºâ€œå½“å‰ç«¯å£8080â€ï¼Œåˆ·æ–°ä¸€æ¬¡ç«¯å£å·å˜æˆäº†â€œå½“å‰ç«¯å£8081â€ï¼Œæ¯åˆ·æ–°ä¸€æ¬¡éƒ½ä¼šåœ¨è¿™ä¸¤ä¸ªç«¯å£ç›¸äº’åˆ‡æ¢ï¼Œå¦‚æœå¼€äº†nä¸ªæœåŠ¡æä¾›è€…å°±åœ¨nä¸ªç«¯å£ä¹‹é—´ç›¸äº’åˆ‡æ¢ï¼Œè¿™æ ·ä¸€æ¥å°±å‡å°‘äº†å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ã€‚</p><h2 id="ä¹ã€Feign"><a href="#ä¹ã€Feign" class="headerlink" title="ä¹ã€Feign"></a>ä¹ã€Feign</h2><h4 id="1-ä»€ä¹ˆæ˜¯Feignï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯Feignï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯Feignï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯Feignï¼Ÿ</h4><p>ä¸Ribbon -æ ·ï¼ŒFeign ä¹Ÿæ˜¯ç”±Netflixæä¾›çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œæ˜¯åŸºäºribbonè¿›è¡Œå°è£…çš„ï¼ŒFeign æ˜¯ä¸€ä¸ªå£°æ˜å¼ã€æ¨¡ç‰ˆåŒ–çš„Web Serviceå®¢æˆ·ç«¯ï¼Œå®ƒç®€åŒ–äº†å¼€å‘è€…ç¼–å†™WebæœåŠ¡å®¢æˆ·ç«¯çš„æ“ä½œï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ç®€å•çš„æ¥å£å’Œæ³¨è§£æ¥è°ƒç”¨HTTP API, Spring Cloud Feign,å®ƒæ•´åˆäº†Ribbonå’ŒHystrix,å…·æœ‰å¯æ’æ‹”ã€åŸºäºæ³¨è§£ã€è´Ÿè½½å‡è¡¡ã€æœåŠ¡ç†”æ–­ç­‰-ç³»åˆ—ä¾¿æ·åŠŸèƒ½ã€‚ç›¸æ¯”è¾ƒäºRibbon + RestTemplateçš„æ–¹å¼ï¼ŒFeign å¤§å¤§ç®€åŒ–äº†ä»£ç çš„å¼€å‘ï¼ŒFeign æ”¯æŒå¤šç§æ³¨è§£ï¼ŒåŒ…æ‹¬Feignæ³¨è§£ã€JAX-RSæ³¨è§£ã€Spring MVCæ³¨è§£ç­‰ï¼ŒSpring Cloudå¯¹Feingè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ•´åˆäº†Ribbonå’ŒEureka,ä»è€Œè®©Feignçš„ä½¿ç”¨æ›´åŠ æ–¹ä¾¿ã€‚</p><h4 id="2-Ribbonå’ŒFeignçš„åŒºåˆ«"><a href="#2-Ribbonå’ŒFeignçš„åŒºåˆ«" class="headerlink" title="2.Ribbonå’ŒFeignçš„åŒºåˆ«"></a>2.Ribbonå’ŒFeignçš„åŒºåˆ«</h4><p>Ribbonæ˜¯ä¸€ä¸ªé€šç”¨çš„HTTPå®¢æˆ·ç«¯å·¥å…·ï¼ŒFeign æ˜¯åŸºäºRibbonå®ç°çš„ã€‚</p><h4 id="3-Feignçš„ç‰¹ç‚¹"><a href="#3-Feignçš„ç‰¹ç‚¹" class="headerlink" title="3.Feignçš„ç‰¹ç‚¹"></a>3.Feignçš„ç‰¹ç‚¹</h4><ul><li>Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„Web Serviceå®¢æˆ·ç«¯ã€‚</li><li>æ”¯æŒFeignæ³¨è§£ã€Spring MVCæ³¨è§£ã€JAX-RSæ³¨è§£ã€‚</li><li>Feign åŸºäºRibbonå®ç°ï¼Œä½¿ç”¨èµ·æ¥æ›´åŠ ç®€å•ã€‚</li><li>Feign é›†æˆäº†Hystrixï¼Œå…·å¤‡æœåŠ¡ç†”æ–­çš„åŠŸèƒ½ã€‚</li></ul><h4 id="4-ä»£ç å®ç°ï¼šåˆ›å»ºæ¨¡å—ï¼Œpom-xmlé…ç½®"><a href="#4-ä»£ç å®ç°ï¼šåˆ›å»ºæ¨¡å—ï¼Œpom-xmlé…ç½®" class="headerlink" title="4.ä»£ç å®ç°ï¼šåˆ›å»ºæ¨¡å—ï¼Œpom.xmlé…ç½®"></a>4.ä»£ç å®ç°ï¼šåˆ›å»ºæ¨¡å—ï¼Œpom.xmlé…ç½®</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>feign<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--ç›¸å…³ä¾èµ–--></span></span><br><span class="line">            <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-openfeign<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="5-åˆ›å»ºapplication-yml"><a href="#5-åˆ›å»ºapplication-yml" class="headerlink" title="5.åˆ›å»ºapplication.yml"></a>5.åˆ›å»ºapplication.yml</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è‡ªå®šä¹‰ç«¯å£</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8050</span></span><br><span class="line">  <span class="comment">#åç§°</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">feign</span></span><br><span class="line"><span class="comment">#æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaulttZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><h4 id="6-å¯åŠ¨ç±»"><a href="#6-å¯åŠ¨ç±»" class="headerlink" title="6.å¯åŠ¨ç±»"></a>6.å¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeignApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(FeignApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="7-åˆ›å»ºå®ä½“ç±»"><a href="#7-åˆ›å»ºå®ä½“ç±»" class="headerlink" title="7.åˆ›å»ºå®ä½“ç±»"></a>7.åˆ›å»ºå®ä½“ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="8-åˆ›å»ºå£°æ˜å¼æ¥å£"><a href="#8-åˆ›å»ºå£°æ˜å¼æ¥å£" class="headerlink" title="8.åˆ›å»ºå£°æ˜å¼æ¥å£"></a>8.åˆ›å»ºå£°æ˜å¼æ¥å£</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.Feign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@FeignClient</span>: éœ€è¦è®¿é—®æœåŠ¡æä¾›è€…çš„åå­—</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@GetMapping</span>("/student/findAll")ï¼š éœ€è¦è®¿é—®æœåŠ¡æä¾›è€…çš„æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"provider"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FeignProviderClient</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/student/findAll"</span>)</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/student/port"</span>)</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å½“å‰æ¥å£</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">port</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="9-åˆ›å»ºControllerå±‚"><a href="#9-åˆ›å»ºControllerå±‚" class="headerlink" title="9.åˆ›å»ºControllerå±‚"></a>9.åˆ›å»ºControllerå±‚</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.Feign.FeignProviderClient;</span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/feign"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeignController</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> FeignProviderClient feignProviderClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * feignProviderClient:åˆšåˆ›å»ºçš„å£°æ˜å¼æ¥å£</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/findAll"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll2</span><span class="params">()</span> </span>{</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> feignProviderClient.findAll();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æµ‹è¯•è´Ÿè½½å‡è¡¡</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/port"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">port</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> feignProviderClient.port();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>10.æŒ‰é¡ºåºå¯åŠ¨ï¼Œç±»ä¼¼äºRibbonï¼Œåªæ˜¯è¿™é‡Œæ˜¯ç”¨Feignå»è°ƒç”¨æœåŠ¡æä¾›è€…</p><p><img src="https://i.loli.net/2020/05/06/OFbqzfRX1Vgm7kt.png" alt="1588660326959"></p><p>è¿™é‡Œæ³¨å†Œä¸­å¿ƒå·²ç»æ³¨å†Œäº†å››ä¸ªï¼Œåˆ†åˆ«æ˜¯ä¸€ä¸ªFeignã€ä¸¤ä¸ªProvideræœåŠ¡æä¾›è€…ã€ä¸€ä¸ªRibbonï¼Œå…¶ä¸­Feignå’ŒRibbonéƒ½æœ‰è´Ÿè½½å‡è¡¡çš„ä½œç”¨ï¼Œä»»ä½•ä¸€ä¸ªéƒ½ä¼šå‡è¡¡è°ƒç”¨æœåŠ¡æä¾›è€…ã€‚</p><h4 id="11-åœ¨Feigné…ç½®æ–‡ä»¶ä¸­å¼€å¯Feignç†”æ–­æœºåˆ¶ï¼Œapplication-yml"><a href="#11-åœ¨Feigné…ç½®æ–‡ä»¶ä¸­å¼€å¯Feignç†”æ–­æœºåˆ¶ï¼Œapplication-yml" class="headerlink" title="11.åœ¨Feigné…ç½®æ–‡ä»¶ä¸­å¼€å¯Feignç†”æ–­æœºåˆ¶ï¼Œapplication.yml"></a>11.åœ¨Feigné…ç½®æ–‡ä»¶ä¸­å¼€å¯Feignç†”æ–­æœºåˆ¶ï¼Œapplication.yml</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è‡ªå®šä¹‰ç«¯å£</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8050</span></span><br><span class="line">  <span class="comment">#åç§°</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">feign</span></span><br><span class="line"><span class="comment">#æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaulttZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¯å¦å¼€å¯ç†”æ–­æœºåˆ¶</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">hystrix:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><h4 id="12-åˆ›å»ºFeignProviderClientæ¥å£çš„å®ç°ç±»FeignError-å®šä¹‰å®¹é”™å¤„ç†é€»è¾‘ï¼Œé€šè¿‡-Component-æ³¨è§£å°†FeignErrorå®ä¾‹æ³¨å…¥loCå®¹å™¨ä¸­ã€‚"><a href="#12-åˆ›å»ºFeignProviderClientæ¥å£çš„å®ç°ç±»FeignError-å®šä¹‰å®¹é”™å¤„ç†é€»è¾‘ï¼Œé€šè¿‡-Component-æ³¨è§£å°†FeignErrorå®ä¾‹æ³¨å…¥loCå®¹å™¨ä¸­ã€‚" class="headerlink" title="12.åˆ›å»ºFeignProviderClientæ¥å£çš„å®ç°ç±»FeignError,å®šä¹‰å®¹é”™å¤„ç†é€»è¾‘ï¼Œé€šè¿‡@Component æ³¨è§£å°†FeignErrorå®ä¾‹æ³¨å…¥loCå®¹å™¨ä¸­ã€‚"></a>12.åˆ›å»ºFeignProviderClientæ¥å£çš„å®ç°ç±»FeignError,å®šä¹‰å®¹é”™å¤„ç†é€»è¾‘ï¼Œé€šè¿‡@Component æ³¨è§£å°†FeignErrorå®ä¾‹æ³¨å…¥loCå®¹å™¨ä¸­ã€‚</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.Feign.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> feign.Feign;</span><br><span class="line"><span class="keyword">import</span> org.example.Feign.FeignProviderClient;</span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FeignError</span> <span class="keyword">implements</span> <span class="title">FeignProviderClient</span> </span>{</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">port</span><span class="params">()</span> </span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"æœåŠ¡å™¨ç»´æŠ¤ä¸­......"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="13-åœ¨FeignProviderClientå®šä¹‰å¤„é€šè¿‡-FeignClientçš„fallbackå±æ€§è®¾ç½®æ˜ å°„ã€‚"><a href="#13-åœ¨FeignProviderClientå®šä¹‰å¤„é€šè¿‡-FeignClientçš„fallbackå±æ€§è®¾ç½®æ˜ å°„ã€‚" class="headerlink" title="13.åœ¨FeignProviderClientå®šä¹‰å¤„é€šè¿‡@FeignClientçš„fallbackå±æ€§è®¾ç½®æ˜ å°„ã€‚"></a>13.åœ¨FeignProviderClientå®šä¹‰å¤„é€šè¿‡@FeignClientçš„fallbackå±æ€§è®¾ç½®æ˜ å°„ã€‚</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.Feign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.Feign.impl.FeignError;</span><br><span class="line"><span class="keyword">import</span> org.example.entity.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@FeignClient</span>: éœ€è¦è®¿é—®æœåŠ¡æä¾›è€…çš„åå­—</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@GetMapping</span>("/student/findAll")ï¼š éœ€è¦è®¿é—®æœåŠ¡æä¾›è€…çš„æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@FeignClient</span>(value = <span class="string">"provider"</span>,fallback = FeignError<span class="class">.<span class="keyword">class</span>)//è¦åŠ å…¥çš„</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">interface</span> <span class="title">FeignProviderClient</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/student/findAll"</span>)</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Collection<Student> <span class="title">findAll</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/student/port"</span>)</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å½“å‰æ¥å£</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">port</span><span class="params">()</span></span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>è¿™é‡Œåªå¯åŠ¨æ³¨å†Œä¸­å¿ƒå’ŒFeiginï¼Œç„¶åå»è°ƒç”¨æœåŠ¡æä¾›è€…çš„ä¸šåŠ¡ï¼Œç”±äºæœåŠ¡æä¾›è€…æˆ‘ä»¬æ²¡æœ‰å¯åŠ¨ï¼Œæ‰€ä»¥æµè§ˆå™¨ä¼šæ˜¾ç¤ºåˆšåˆšæˆ‘ä»¬è®¾ç½®çš„å®¹é”™æœºåˆ¶â€”-â€œæœåŠ¡å™¨ç»´æŠ¤ä¸­â€ï¼Œå¦‚æœä¸è®¾ç½®æœåŠ¡å®¹é”™æœºåˆ¶å°±ä¼šæ˜¾ç¤º404æˆ–è€…500ç­‰ä¿¡æ¯ã€‚</li></ul><h2 id="åã€Hystrixå®¹é”™æœºåˆ¶"><a href="#åã€Hystrixå®¹é”™æœºåˆ¶" class="headerlink" title="åã€Hystrixå®¹é”™æœºåˆ¶"></a>åã€Hystrixå®¹é”™æœºåˆ¶</h2><h4 id="1-ä»€ä¹ˆæ˜¯å®¹é”™æœºåˆ¶ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å®¹é”™æœºåˆ¶ï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯å®¹é”™æœºåˆ¶ï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯å®¹é”™æœºåˆ¶ï¼Ÿ</h4><p>éšç€åˆ†å¸ƒå¼ã€å¾®æœåŠ¡é¡¹ç›®çš„å¿«é€Ÿå‘å±•ï¼Œå„ä¸ªæœåŠ¡ä¹‹é—´çš„é€šè®¯ï¼Œéš¾å…å‡ºç°ä¾èµ–å…³ç³»ï¼Œè‹¥æŸä¸€ä¸ªå•å…ƒå‡ºç°æ•…éšœï¼Œå°±å¾ˆå®¹æ˜“å› ä¾èµ–å…³ç³»è€Œå‘ç”Ÿæ•…éšœçš„è”“å»¶ï¼Œä¸ºäº†è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œå®¹é”™ä½œä¸ºå…¶ä¸­ä¸€é¡¹å¾ˆé‡è¦çš„æŠ€æœ¯ä¹Ÿå¹¿ä¸ºäººçŸ¥ï¼Œç±»ä¼¼äºç”µè·¯ä¸­çš„ä¿é™©ä¸ï¼Œå¦‚æœç”µè·¯ä¸­æŸå¤„å‡ºç°æ•…éšœå°±ä¼šçƒ§æ–­ä¿é™©ä¸è€Œé˜²æ­¢æ•…éšœç»§ç»­è”“å»¶ã€‚</p><h4 id="2-è®¾è®¡åŸåˆ™"><a href="#2-è®¾è®¡åŸåˆ™" class="headerlink" title="2.è®¾è®¡åŸåˆ™"></a>2.è®¾è®¡åŸåˆ™</h4><ul><li>æœåŠ¡éš”ç¦»æœºåˆ¶</li><li>æœåŠ¡é™çº§æœºåˆ¶</li><li>ç†”æ–­æœºåˆ¶</li><li>æä¾›å®æ—¶çš„ç›‘æ§å’ŒæŠ¥è­¦åŠŸèƒ½</li><li>æä¾›å®æ—¶çš„é…ç½®ä¿®æ”¹åŠŸèƒ½</li></ul><h4 id="3-ä»‹ç»"><a href="#3-ä»‹ç»" class="headerlink" title="3.ä»‹ç»"></a>3.ä»‹ç»</h4><p>Hystrixæ•°æ®ç›‘æ§éœ€è¦ç»“åˆSpringBoot Actuatorç»„ä»¶æ¥ä½¿ç”¨ï¼ŒActuator æä¾›äº†å¯¹æœåŠ¡çš„å¥åº·ç›‘æ§ã€æ•°æ®ç»Ÿè®¡ï¼Œå¯ä»¥é€šè¿‡hystrix-streamèŠ‚ç‚¹è·å–ç›‘æ§çš„è¯·æ±‚æ•°æ®ï¼Œæä¾›äº†å¯è§†åŒ–çš„ç›‘æ§ç•Œé¢ã€‚</p><h4 id="4-å®ä¾‹â€”åˆ›å»ºhystrixæ¨¡å—ï¼Œpom-xmlé…ç½®"><a href="#4-å®ä¾‹â€”åˆ›å»ºhystrixæ¨¡å—ï¼Œpom-xmlé…ç½®" class="headerlink" title="4.å®ä¾‹â€”åˆ›å»ºhystrixæ¨¡å—ï¼Œpom.xmlé…ç½®"></a>4.å®ä¾‹â€”åˆ›å»ºhystrixæ¨¡å—ï¼Œpom.xmlé…ç½®</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>hystrix<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="comment"><!--eureka-clientä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="comment"><!--feignä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-openfeign<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="comment"><!--actuatoræ•°æ®ç›‘æ§ä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.boot<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-boot-starter-actuator<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.7.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="comment"><!--hystrixä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-hystrix<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="comment"><!--æ•°æ®ç›‘æ§å¯è§†åŒ–ä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-hystrix-dashboard<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="5-åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œapplication-yml"><a href="#5-åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œapplication-yml" class="headerlink" title="5.åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œapplication.yml"></a>5.åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œapplication.yml</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#è‡ªå®šä¹‰ç«¯å£</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8060</span></span><br><span class="line">  <span class="comment">#åç§°</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">hystrix</span></span><br><span class="line"><span class="comment">#æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒ</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaulttZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">prefer-ip-address:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ˜¯å¦å¼€å¯ç†”æ–­æœºåˆ¶</span></span><br><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">hystrix:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#æ•°æ®ç›‘æ§</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">'hystrix.stream'</span></span><br></pre></td></tr></tbody></table></figure><h4 id="6-åˆ›å»ºå¯åŠ¨ç±»"><a href="#6-åˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="6.åˆ›å»ºå¯åŠ¨ç±»"></a>6.åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.hystrix.dashboard.EnableHystrixDashboard;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.EnableFeignClients;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@EnableCircuitBreaker</span>: å£°æ˜å¯ç”¨æ•°æ®ç›‘æ§</span></span><br><span class="line"><span class="comment"> *<span class="doctag">@EnableHystrixDashboard</span>ï¼š å£°æ˜å¯ç”¨å¯è§†åŒ–æ•°æ®ç›‘æ§</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span></span><br><span class="line"><span class="meta">@EnableHystrixDashboard</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HystrixApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(HystrixApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="7-ä¸Feignä¸€æ ·åˆ›å»ºControllerå±‚ã€å®ä½“ç±»ã€Feignæ¥å£ä¸å®ç°ç±»"><a href="#7-ä¸Feignä¸€æ ·åˆ›å»ºControllerå±‚ã€å®ä½“ç±»ã€Feignæ¥å£ä¸å®ç°ç±»" class="headerlink" title="7.ä¸Feignä¸€æ ·åˆ›å»ºControllerå±‚ã€å®ä½“ç±»ã€Feignæ¥å£ä¸å®ç°ç±»"></a>7.ä¸Feignä¸€æ ·åˆ›å»ºControllerå±‚ã€å®ä½“ç±»ã€Feignæ¥å£ä¸å®ç°ç±»</h4><h4 id="8-å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ-gt-æœåŠ¡æä¾›è€…-gt-hystrixæ¨¡å—"><a href="#8-å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ-gt-æœåŠ¡æä¾›è€…-gt-hystrixæ¨¡å—" class="headerlink" title="8.å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ->æœåŠ¡æä¾›è€…->hystrixæ¨¡å—"></a>8.å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ->æœåŠ¡æä¾›è€…->hystrixæ¨¡å—</h4><ul><li>å¯åŠ¨æˆåŠŸä¹‹åï¼Œè®¿é—®<a href="http://localhost:8060/actuator/hystrix.streamå¯ä»¥ç›‘æ§åˆ°è¯·æ±‚æ•°æ®" target="_blank" rel="noopener">http://localhost:8060/actuator/hystrix.streamå¯ä»¥ç›‘æ§åˆ°è¯·æ±‚æ•°æ®</a></li><li>è®¿é—®<a href="http://localhost:8060/hystrixï¼Œå¯ä»¥çœ‹åˆ°å¯è§†åŒ–çš„ç›‘æ§ç•Œé¢,è¾“å…¥è¦ç›‘æ§çš„åœ°å€èŠ‚ç‚¹å³å¯çœ‹åˆ°è¯¥èŠ‚ç‚¹çš„å¯è§†åŒ–æ•°æ®ç›‘æ§ã€‚" target="_blank" rel="noopener">http://localhost:8060/hystrixï¼Œå¯ä»¥çœ‹åˆ°å¯è§†åŒ–çš„ç›‘æ§ç•Œé¢,è¾“å…¥è¦ç›‘æ§çš„åœ°å€èŠ‚ç‚¹å³å¯çœ‹åˆ°è¯¥èŠ‚ç‚¹çš„å¯è§†åŒ–æ•°æ®ç›‘æ§ã€‚</a></li></ul><p><img src="https://i.loli.net/2020/05/06/lqV6m32zQHu8nvs.png" alt="1588667837381"></p><p>å†æ–°æ‰“å¼€ä¸€ä¸ªçª—å£è¾“å…¥hystrixæ¥å£åœ°å€è°ƒç”¨æŸ¥è¯¢æ–¹æ³•findAllä¾¿å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ•°æ®ç›‘æ§</p><p><img src="https://i.loli.net/2020/05/06/UoW5RSfqBdGlJv6.png" alt="1588669311295"></p><h2 id="å-ä¸€ã€Spring-Cloudé…ç½®ä¸­å¿ƒ"><a href="#å-ä¸€ã€Spring-Cloudé…ç½®ä¸­å¿ƒ" class="headerlink" title="å ä¸€ã€Spring Cloudé…ç½®ä¸­å¿ƒ"></a>å ä¸€ã€Spring Cloudé…ç½®ä¸­å¿ƒ</h2><h4 id="1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨é…ç½®ä¸­å¿ƒï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨é…ç½®ä¸­å¿ƒï¼Ÿ" class="headerlink" title="1.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨é…ç½®ä¸­å¿ƒï¼Ÿ"></a>1.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨é…ç½®ä¸­å¿ƒï¼Ÿ</h4><p>ç”±äºä¸€ä¸ªä¸€ä¸ªå¾®æœåŠ¡éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œæ¯æ¬¡ä¿®æ”¹éƒ½éœ€è¦æ‰¾åˆ°å¯¹åº”çš„å¾®æœåŠ¡çš„é…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œé‚£ä¹ˆå¦‚æœåˆä¸Šç™¾ä¸ªæˆ–è€…ä¸Šåƒä¸ªæˆ‘ä»¬ä¹Ÿè¿™æ ·å»æ”¹å—ï¼Ÿæ˜¾ç„¶è¿™æ ·åšæ˜¯ä¸åˆç†çš„ï¼Œäºæ˜¯å°±å¯ä»¥å°†æ‰€æœ‰çš„é…ç½®æ–‡ä»¶æ•´åˆåœ¨ä¸€ä¸ªé…ç½®ä¸­å¿ƒï¼Œéœ€è¦ä¿®æ”¹æ—¶ç›´æ¥åœ¨é…ç½®ä¸­å¿ƒä¿®æ”¹ã€‚</p><h4 id="2-Spring-Cloud-Config"><a href="#2-Spring-Cloud-Config" class="headerlink" title="2.Spring Cloud Config"></a>2.Spring Cloud Config</h4><p>é€šè¿‡æœåŠ¡ç«¯å¯ä»¥ä¸ºå¤šä¸ªå®¢æˆ·ç«¯æä¾›é…ç½®æœåŠ¡ã€‚Spring Cloud Configå¯ä»¥å°†é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¹Ÿå¯ä»¥å°†é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨è¿œç¨‹Gitä»“åº“ï¼Œåˆ›å»ºConfig Server,é€šè¿‡å®ƒç®¡ç†æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ã€‚</p><h4 id="3-æœ¬åœ°é…ç½®ä¸­å¿ƒ"><a href="#3-æœ¬åœ°é…ç½®ä¸­å¿ƒ" class="headerlink" title="3.æœ¬åœ°é…ç½®ä¸­å¿ƒ"></a>3.æœ¬åœ°é…ç½®ä¸­å¿ƒ</h4><ul><li><p>åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºMavenå·¥ç¨‹ï¼Œpom.xmlé…ç½®</p><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>nativeconfigserver<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="comment"><!--configä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-config-server<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure></li><li><p>åˆ›å»ºapplication.yml</p><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8762</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">nativeconfigserver</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">native</span>  <span class="comment">#é…ç½®æ–‡ä»¶çš„è·å–æ–¹å¼</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">native:</span></span><br><span class="line">          <span class="attr">search-locations:</span> <span class="string">calsspath:/shared</span> <span class="comment">#æœ¬åœ°é…ç½®æ–‡ä»¶è·¯å¾„</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>resourcesè·¯å¾„ä¸‹åˆ›å»ºsharedæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ­¤è·¯å¾„ä¸‹åˆ›å»ºconfigclient-dev.yml</p></li><li><p>åˆ›å»ºå¯åŠ¨ç±»</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.config.server.EnableConfigServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span>    <span class="comment">//å£°æ˜é…ç½®ä¸­å¿ƒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NativeConfigServerApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(NativeConfigServerApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="4-åˆ›å»ºæœ¬åœ°é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯è¯»å–æœ¬åœ°é…ç½®ä¸­å¿ƒçš„é…ç½®æ–‡ä»¶"><a href="#4-åˆ›å»ºæœ¬åœ°é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯è¯»å–æœ¬åœ°é…ç½®ä¸­å¿ƒçš„é…ç½®æ–‡ä»¶" class="headerlink" title="4.åˆ›å»ºæœ¬åœ°é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯è¯»å–æœ¬åœ°é…ç½®ä¸­å¿ƒçš„é…ç½®æ–‡ä»¶"></a>4.åˆ›å»ºæœ¬åœ°é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯è¯»å–æœ¬åœ°é…ç½®ä¸­å¿ƒçš„é…ç½®æ–‡ä»¶</h4><ul><li><p>åœ¨çˆ¶å·¥ç¨‹ä¸‹åˆ›å»ºå®¢æˆ·ç«¯æ¨¡å—ï¼Œpom.xml</p><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>nativeconfigclient<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="comment"><!--configä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-config<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure></li><li><p>åˆ›å»ºbootstrap.ymlé…ç½®æ–‡ä»¶ï¼Œç”¨äºé…ç½®åŠ è½½é…ç½®ä¸­å¿ƒæ–‡ä»¶çš„å†…å®¹</p><p>æ³¨:é…ç½®æ–‡ä»¶åå¿…é¡»ä¸ºbootstrap</p><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">configclient</span> <span class="comment">#å®¢æˆ·ç«¯åå­—</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span>  <span class="comment">#ä¸å®¢æˆ·ç«¯åå­—æ‹¼æ¥èµ·æ¥ä½œä¸ºæ–‡ä»¶åå­—æ‰¾åˆ°ä¸æ‹¼æ¥åå­—ä¸€è‡´çš„é…ç½®ä¸­å¿ƒé…ç½®æ–‡ä»¶</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">uri:</span>  <span class="string">http://localhost:8762</span>  <span class="comment">#é…ç½®ä¸­å¿ƒåœ°å€</span></span><br><span class="line">      <span class="attr">fail-fast:</span> <span class="literal">true</span>  <span class="comment">#è®¾ç½®å®¢æˆ·ç«¯ä¼˜å…ˆåˆ¤æ–­Config Serverè·å–æ˜¯å¦æ­£å¸¸ã€‚</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>åˆ›å»ºå¯åŠ¨ç±»</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NativeConfigClientApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(NativeConfigClientApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>åˆ›å»ºControllerå±‚</p><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/native"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NativeConfigClientController</span> </span>{</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"${server.port}"</span>)</span><br><span class="line">    <span class="keyword">private</span> String port;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"foo"</span>)</span><br><span class="line">    <span class="keyword">private</span> String foo;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”¨äºè¿”å›sharedæ–‡ä»¶ä¸‹çš„é…ç½®ä¸­å¿ƒæ–‡ä»¶é‡Œé¢çš„ç«¯å£å’Œfooå€¼</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.port+<span class="string">"---"</span>+<span class="keyword">this</span>.foo;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ->æœ¬åœ°é…ç½®ä¸­å¿ƒ->æœ¬åœ°é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯</p><p>æµè§ˆå™¨è¾“å…¥æœ¬åœ°é…ç½®ä¸­å¿ƒå®¢æˆ·ç«¯çš„åœ°å€ï¼Œç»“æœè¿”å›8070â€”foo version 1ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯è°ƒç”¨äº†æœ¬åœ°é…ç½®ä¸­å¿ƒçš„é…ç½®æ–‡ä»¶ã€‚</p></li></ul><h2 id="åäºŒã€æœåŠ¡è·Ÿè¸ª"><a href="#åäºŒã€æœåŠ¡è·Ÿè¸ª" class="headerlink" title="åäºŒã€æœåŠ¡è·Ÿè¸ª"></a>åäºŒã€æœåŠ¡è·Ÿè¸ª</h2><h4 id="1-ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡è·Ÿè¸ª"><a href="#1-ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡è·Ÿè¸ª" class="headerlink" title="1.ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡è·Ÿè¸ª"></a>1.ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡è·Ÿè¸ª</h4><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå¾€å¾€æœ‰æˆç™¾ä¸Šåƒä¸ªå¾®å°çš„æœåŠ¡ï¼ŒåŒæ—¶åˆå­˜åœ¨æœåŠ¡ä¸æœåŠ¡ä¹‹é—´è°ƒç”¨ï¼Œä¹‹é—´æ˜¯éå¸¸çš„å¤æ‚ï¼Œæ‰€ä»¥æœåŠ¡è·Ÿè¸ªå¯ä»¥è·Ÿè¸ªè®°å½•ä¸€æ¬¡ç”¨æˆ·è¯·æ±‚éƒ½å‘èµ·äº†å“ªäº›è°ƒç”¨ï¼Œç»è¿‡å“ªäº›æœåŠ¡å¤„ç†ï¼Œå¹¶ä¸”è®°å½•æ¯ä¸€æ¬¡è°ƒç”¨æ‰€æ¶‰åŠçš„æœåŠ¡çš„è¯¦ç»†ä¿¡æ¯ï¼Œé€šè¿‡æ—¥å¿—å¿«é€Ÿå®šä½æ˜¯è°ƒç”¨å¤±è´¥çš„ç¯èŠ‚ã€‚</p><h4 id="2-Spring-Cloud-Zipkin"><a href="#2-Spring-Cloud-Zipkin" class="headerlink" title="2.Spring Cloud Zipkin"></a>2.Spring Cloud Zipkin</h4><p>Zipkinæ˜¯-ä¸€ä¸ªå¯ä»¥é‡‡é›†å¹¶ä¸”è·Ÿè¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¯·æ±‚æ•°æ®çš„ç»„ä»¶,è®©å¼€å‘è€…å¯ä»¥æ›´åŠ ç›´è§‚çš„ç›‘æ§åˆ°è¯·æ±‚åœ¨å„ä¸ªå¾®æœåŠ¡æ‰€è€—è´¹çš„æ—¶é—´ç­‰ï¼ŒZipkin: Zipkin Server. Zipkin Clientã€‚</p><h4 id="3-åˆ›å»ºzipkinserveræ¨¡å—ï¼Œpom-xml"><a href="#3-åˆ›å»ºzipkinserveræ¨¡å—ï¼Œpom-xml" class="headerlink" title="3.åˆ›å»ºzipkinserveræ¨¡å—ï¼Œpom.xml"></a>3.åˆ›å»ºzipkinserveræ¨¡å—ï¼Œpom.xml</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>zipkinserver<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">          <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.boot<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-boot-starter-web<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="comment"><!--æ’é™¤è¿™ä¸ªslf4j-log4j12é€ æˆçš„å†²çª--></span></span><br><span class="line">            <span class="tag"><<span class="name">exclusions</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">exclusion</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">groupId</span>></span>org.slf4j<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">artifactId</span>></span>slf4j-log4j12<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">                <span class="tag"></<span class="name">exclusion</span>></span></span><br><span class="line">            <span class="tag"></<span class="name">exclusions</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"><!--zipkinä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>io.zipkin.java<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>zipkin-server<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.9.4<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">        <span class="comment"><!--å¯è§†åŒ–ç•Œé¢--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>io.zipkin.java<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>zipkin-autoconfigure-ui<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.9.4<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="4-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#4-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="4.åˆ›å»ºé…ç½®æ–‡ä»¶"></a>4.åˆ›å»ºé…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9090</span></span><br><span class="line"></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">metrics:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">server:</span></span><br><span class="line">        <span class="attr">auto-time-requests:</span> <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure><h4 id="5-åˆ›å»ºå¯åŠ¨ç±»-2"><a href="#5-åˆ›å»ºå¯åŠ¨ç±»-2" class="headerlink" title="5.åˆ›å»ºå¯åŠ¨ç±»"></a>5.åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> zipkin.server.internal.EnableZipkinServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableZipkinServer</span>  <span class="comment">//å£°æ˜å¯åŠ¨ZipkinServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZipkinServerApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(ZipkinServerApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="6-åˆ›å»ºzipkinclientæ¨¡å—-pom-xml"><a href="#6-åˆ›å»ºzipkinclientæ¨¡å—-pom-xml" class="headerlink" title="6.åˆ›å»ºzipkinclientæ¨¡å—,pom.xml"></a>6.åˆ›å»ºzipkinclientæ¨¡å—,pom.xml</h4><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">parent</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">artifactId</span>></span>springcloud<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">groupId</span>></span>org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">parent</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>zipkinclient<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line">        <span class="comment"><!--zipkinclientä¾èµ–--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-zipkin<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">        </span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.springframework.cloud<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>spring-cloud-starter-netflix-eureka-client<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>2.0.2.RELEASE<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h4 id="7-åˆ›å»ºé…ç½®æ–‡ä»¶"><a href="#7-åˆ›å»ºé…ç½®æ–‡ä»¶" class="headerlink" title="7.åˆ›å»ºé…ç½®æ–‡ä»¶"></a>7.åˆ›å»ºé…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8090</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">zipkinclient</span></span><br><span class="line">  <span class="attr">sleuth:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">client:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment">#è®¾ç½®å¼€å¯è¯·æ±‚è·Ÿè¸ª</span></span><br><span class="line">    <span class="attr">sampler:</span></span><br><span class="line">      <span class="attr">probability:</span> <span class="number">1.0</span>  <span class="comment">#è®¾ç½®é‡‡æ ·æ¯”ä¾‹ï¼Œé»˜è®¤æ˜¯1.0</span></span><br><span class="line">  <span class="attr">zipkin:</span></span><br><span class="line">    <span class="attr">base-url:</span> <span class="string">http://localhost:9090/</span>  <span class="comment">#zipkin Serveråœ°å€</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:8761/eureka/</span></span><br></pre></td></tr></tbody></table></figure><h4 id="8-åˆ›å»ºå¯åŠ¨ç±»"><a href="#8-åˆ›å»ºå¯åŠ¨ç±»" class="headerlink" title="8.åˆ›å»ºå¯åŠ¨ç±»"></a>8.åˆ›å»ºå¯åŠ¨ç±»</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZipkinApplication</span> </span>{</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{</span><br><span class="line">        SpringApplication.run(ZipkinApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="9-åˆ›å»ºControllerå±‚-1"><a href="#9-åˆ›å»ºControllerå±‚-1" class="headerlink" title="9.åˆ›å»ºControllerå±‚"></a>9.åˆ›å»ºControllerå±‚</h4><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/zipkin"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZipkinController</span> </span>{</span><br><span class="line"><span class="meta">@Value</span>(<span class="string">"${server.port}"</span>)</span><br><span class="line">    <span class="keyword">private</span> String port;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/index"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">index</span><span class="params">()</span></span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.port;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="10-å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ-gt-zipkinserveræ¨¡å—-gt-zipkinclientæ¨¡å—"><a href="#10-å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ-gt-zipkinserveræ¨¡å—-gt-zipkinclientæ¨¡å—" class="headerlink" title="10.å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ->zipkinserveræ¨¡å—->zipkinclientæ¨¡å—"></a>10.å¯åŠ¨ï¼šæ³¨å†Œä¸­å¿ƒ->zipkinserveræ¨¡å—->zipkinclientæ¨¡å—</h4><h4 id="11-æµè§ˆå™¨è¾“å…¥ï¼šhttp-localhost-9090-zipkin-ï¼ˆå¯è§†åŒ–å›¾å½¢ç•Œé¢ï¼‰"><a href="#11-æµè§ˆå™¨è¾“å…¥ï¼šhttp-localhost-9090-zipkin-ï¼ˆå¯è§†åŒ–å›¾å½¢ç•Œé¢ï¼‰" class="headerlink" title="11.æµè§ˆå™¨è¾“å…¥ï¼šhttp://localhost:9090/zipkin/ ï¼ˆå¯è§†åŒ–å›¾å½¢ç•Œé¢ï¼‰"></a>11.æµè§ˆå™¨è¾“å…¥ï¼š<a href="http://localhost:9090/zipkin/" target="_blank" rel="noopener">http://localhost:9090/zipkin/</a> ï¼ˆå¯è§†åŒ–å›¾å½¢ç•Œé¢ï¼‰</h4><p><img src="https://i.loli.net/2020/05/06/w3WyrfZ5CqusHzp.png" alt="1588691911516"></p><p>æˆ‘ä»¬å¯ä»¥æ–°æ‰“å¼€ä¸€ä¸ªçª—å£è¾“å…¥zipkinclientæ¨¡å—çš„åœ°å€è¿›è¡Œè°ƒç”¨ï¼š<a href="http://localhost:8090/zipkin/indexï¼Œè¿”å›å›¾å½¢ç•Œé¢ä¾¿å¯ä»¥çœ‹åˆ°è·Ÿè¸ªè®°å½•ã€‚ï¼Œè¿”å›å›¾å½¢ç•Œé¢ä¾¿å¯ä»¥çœ‹åˆ°è·Ÿè¸ªè®°å½•ã€‚" target="_blank" rel="noopener">http://localhost:8090/zipkin/indexï¼Œè¿”å›å›¾å½¢ç•Œé¢ä¾¿å¯ä»¥çœ‹åˆ°è·Ÿè¸ªè®°å½•ã€‚ï¼Œè¿”å›å›¾å½¢ç•Œé¢ä¾¿å¯ä»¥çœ‹åˆ°è·Ÿè¸ªè®°å½•ã€‚</a></p><blockquote><p>å£°æ˜ï¼šæ­¤æ–‡ç« æ˜¯ç»“åˆBç«™â€™æ¥ å“¥æ•™ä½ å­¦Javaâ€™è§†é¢‘è‡ªå·±æ•´ç†å‡ºæ¥çš„ç¬”è®°ï¼Œå¦‚æœ‰ä¸æ¸…æ¥šçš„å¯ä»¥å»çœ‹æ¥ å“¥è§†é¢‘ã€‚ï¿½</p></blockquote><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>springCloud</category>
      </categories>
      <tags>
        <tag>å¾®æœåŠ¡</tag>
        <tag>springCloud</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title>dockeréƒ¨ç½²springbooté¡¹ç›®</title>
    <url>/zh/20/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><h5 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h5><blockquote><p>éœ€è¦çš„çŸ¥è¯†</p></blockquote><ul><li>Linuxæ“ä½œç³»ç»Ÿ</li><li>docker(äº†è§£gitçš„å·¥ä½œæ–¹å¼å³å¯)</li></ul><h5 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h5><blockquote><p>xshell(ç”¨æ¥è¿æ¥linuxæœåŠ¡å™¨)<br>xftpç”¨æ¥ç»™linuxæœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶<br>sqlyog(æˆ–è€…navicat)åœ¨æœåŠ¡å™¨ä¸Šè§£æ.sqlè„šæœ¬<br>maven(ideaè‡ªå¸¦) ç”¨æ¥æ‰“åŒ…</p></blockquote><h5 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h5><p>ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œdockeræˆ‘ç†è§£çš„å°±æ˜¯æ›´æ–¹ä¾¿çš„éƒ¨ç½²å·¥å…·ï¼Œå¦‚æœæœ‰ç©è¿‡æœåŠ¡å™¨çš„åŒå­¦éƒ½çŸ¥é“ï¼Œåœ¨linuxæœåŠ¡å™¨ä¸Šé…ç½®mysqlæ˜¯ä¸€ä»¶æŒºéº»çƒ¦çš„äº‹ï¼Œè€Œç”¨äº†dockerï¼Œåªéœ€è¦å‡ ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥é…ç½®å¥½mysqlã€‚</p><p>docker çš„ä¸‰ä¸ªæ¦‚å¿µ:</p><p>ä»“åº“ï¼šä»“åº“å°±ç±»æ¯”äºgithubä»“åº“ï¼Œä¸Šé¢å­˜å‚¨ç€å„ç§å„æ ·ç‰ˆæœ¬çš„è½¯ä»¶<br>é•œåƒï¼Œæˆ‘ä»¬ä»dockerä¸Šæ‹‰å–ä¸€ä¸ªè½¯ä»¶åˆå§‹å°±æ˜¯ä¸ªé•œåƒ<br>å®¹å™¨ï¼Œå®¹å™¨å°±æ˜¯é•œåƒè¿è¡Œæ—¶ï¼Œå¯ä»¥ç”¨çš„è½¯ä»¶<br>ç±»æ¯”ä¸€ä¸‹å¥½ç†è§£ï¼Œé•œåƒå°±æ˜¯javaä¸­çš„ç±»ï¼Œè€Œå®¹å™¨åˆ™æ˜¯ç”±ç±»ç”Ÿæˆçš„å¯¹è±¡ï¼Œç±»æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œè€Œå¯¹è±¡å¯ä»¥ã€‚</p><p>æ¥ä¸‹æ¥å¼€å§‹å®æ“</p><p>æˆ‘ä»¬æŒ‰ç…§å®˜ç½‘æ¥</p><p>åœ¨å®‰è£…dockerå‰ï¼Œå…ˆå®‰è£…dockerçš„åŒ…</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo yum install -y yum-utils \</span><br><span class="line">  device-mapper-persistent-data \</span><br><span class="line">  lvm2</span><br></pre></td></tr></tbody></table></figure><p>é…ç½®dockerçš„ä»“åº“ï¼Œä»dockerå®˜æ–¹ä»“åº“ä¸‹è½½ä¼šå¤ªæ…¢ï¼Œæˆ‘ä»¬å°±å°†ä»“åº“é…ç½®åˆ°é˜¿é‡Œäº‘(ç±»ä¼¼äºmavençš„ä»“åº“é…ç½®)</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></tbody></table></figure><h5 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h5><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">sudo yum install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></tbody></table></figure><p>è¿è¡Œä¸­å‡ºç°Is this ok,é€‰æ‹©y</p><p>è¦ç»§ç»­é…ç½®ä¸€ä¸‹é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿ,æŒ‰å¦‚ä¸‹æ­¥éª¤å®Œæˆå³å¯.</p><p>æ­¥éª¤2ï¼Œæ˜¯å†™é…ç½®æ–‡ä»¶</p><ol><li><p>mkdir -p /etc/docker</p></li><li><p>vim /etc/docker/daemon.json</p></li><li><p>systemctl daemon-reload</p></li><li><p>systemctl restart docker</p><ul><li>æ­¥éª¤2çš„é…ç½®æ–‡ä»¶æ ¼å¼<br>{<br>â€œregistry-mirrorsâ€: [â€œhttps://ï½›è‡ªå·²çš„ç¼–ç ï½.mirror.aliyuncs.comâ€]<br>}<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">åœ¨é˜¿é‡Œäº‘é•œåƒäº‘æŸ¥çœ‹é•œåƒåŠ é€Ÿå™¨é…ç½®</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¼€å¯docker</span><br><span class="line"></span><br><span class="line">sudo systemctl start docker</span><br><span class="line"></span><br><span class="line">è·‘ä¸€ä¸ªdockerç‰ˆçš„helloworldï¼Œç±»ä¼¼äºjavaçš„helloï¼Œè¯æ˜å®‰è£…æˆåŠŸ</span><br><span class="line"></span><br><span class="line">sudo docker run hello-world</span><br><span class="line"></span><br><span class="line">å‡ºç°ä¸‹å›¾å†…å®¹ï¼Œè¡¨ç¤ºdockerè¿è¡ŒæˆåŠŸ</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### æœåŠ¡å™¨çš„é…ç½®</span><br><span class="line">æœåŠ¡å™¨é…ç½®æ€»ç»“ä¸ºä¸‰ä¸ªï¼Œé˜²ç«å¢™ï¼Œç«¯å£ï¼Œå’Œå®‰å…¨ç»„</span><br><span class="line"></span><br><span class="line">1.æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ï¼Œå¦‚æœªå¼€å¯è¦å¼€å¯é˜²ç«å¢™ï¼Œæˆ‘çš„æ˜¯å¼€å¯çš„</span><br><span class="line"></span><br><span class="line">firewall-cmd --state</span><br><span class="line"></span><br><span class="line">å¦‚æœæ²¡å¼€å¯ï¼Œå¼€å¯é˜²ç«å¢™çš„å‘½ä»¤</span><br><span class="line"></span><br><span class="line">systemctl start firewalld.service</span><br><span class="line"></span><br><span class="line">æ·»åŠ å¯¹å¤–å¼€æ”¾çš„ç«¯å£ï¼Œæˆ‘æ˜¯å¼€äº†ä¸‰ä¸ªç«¯å£ï¼Œä¸€ä¸ª80(Httpç«¯å£),ä¸€ä¸ª8080(tomcat)ï¼Œä¸€ä¸ª2206(mysql)</span><br><span class="line">```linux</span><br><span class="line">1. firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line">2. firewall-cmd --zone=public --add-port=8080/tcp --permanent</span><br><span class="line">3. firewall-cmd --zone=public --add-port=3306/tcp --permanent</span><br></pre></td></tr></tbody></table></figure>å¼€å®Œç«¯å£ï¼Œè¦é‡æ–°åŠ è½½é˜²ç«å¢™</li></ul></li></ol><p>firewall-cmd â€“reload</p><p>æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£</p><p>firewall-cmd â€“list-ports</p><p>é…ç½®å®‰å…¨ç»„:ç™¾åº¦å¦‚ä½•é…ç½®è¿›å…¥é…å®‰å…¨ç»„çš„åœ°æ–¹ï¼ŒæŒ‰ç…§ä¸‹å›¾é…ç½®çš„æ¡ä»¶é…ç½®å³å¯</p><h5 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h5><p>ä»docker hubä¸ŠæŸ¥æ‰¾mysqlé•œåƒ</p><p>docker search mysql</p><p>ä»docker hubä¸Šæ‹‰å–mysql,æˆ‘æ‹‰å–çš„mysqlç‰ˆæœ¬æ˜¯mysql5.7</p><p>docker pull mysql:5.7</p><p>è¿è¡Œmysqlï¼Œå¼€æ”¾çš„ç«¯å£æ˜¯3306ï¼Œå¯†ç æ˜¯123456ï¼Œ -dæ˜¯åå°è¿è¡Œ</p><p>docker run -p 3306:3306 â€“name mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</p><p>docker ps æŸ¥çœ‹å®¹å™¨åˆ›å»ºæˆåŠŸ</p><p>æœ‰ä¸ªå‘½ä»¤ï¼Œå¯ä»¥è¿›å…¥å®¹å™¨å†…éƒ¨,ctrl+p+qå¯ä»¥ä»¥åå°è¿è¡Œçš„æ–¹å¼é€€å‡ºè¿™ä¸ªè½¯ä»¶</p><p>docker exec -it å®¹å™¨çš„id /bin/bash</p><p>è¿æ¥æœåŠ¡å™¨ä¸Šçš„mysql</p><p>æ‰§è¡Œæˆ‘æä¾›çš„sqlè„šæœ¬å°±å¥½äº†</p><p>æ‰§è¡ŒæˆåŠŸ</p><p>å°†springbooté¡¹ç›®æ‰“æˆjaråŒ…<br>å°†applicayion.ymlä¸­çš„urlä¸­çš„localhostæ”¹æˆä½ æœåŠ¡å™¨çš„å…¬ç½‘ipï¼Œè¿˜æœ‰å°†å¯†ç æ”¹æˆä½ æœåŠ¡å™¨ä¸Šmysqlçš„å¯†ç </p><p>æ‰“åŒ…çš„å‘½ä»¤æœ‰ä¸¤ä¸ªï¼Œmvn clean ,mvn package</p><p>åœ¨targetæ–‡ä»¶å¤¹å‡ºç°jarè¡¨ç¤ºæˆåŠŸ</p><h5 id="ç¼–å†™Dockfileæ–‡ä»¶"><a href="#ç¼–å†™Dockfileæ–‡ä»¶" class="headerlink" title="ç¼–å†™Dockfileæ–‡ä»¶"></a>ç¼–å†™Dockfileæ–‡ä»¶</h5><p>å°†springboot jaråŒ…é¡¹ç›®æ‰“åŒ…æˆDockeré•œåƒ</p><p>åœ¨ /home ç›®å½•ä¸‹åˆ›å»ºdockeræ–‡ä»¶å¤¹</p><p>mkdir /home/docker<br>ä½¿ç”¨xftpä¸Šä¼ jaråŒ…</p><p>ç¼–å†™Dockerfileæ–‡ä»¶</p><p>vim Dockerfile</p><p>å®Œæ•´å‘½ä»¤, vimçš„ä½¿ç”¨æ–¹æ³•ï¼šç‚¹å‡»iå¼€å§‹ç¼–å†™ï¼Œç¼–å†™å®Œåç‚¹å‡»escï¼Œç‚¹å‡»å†’å·ï¼Œè¾“å…¥wqä¿å­˜</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">FROM java:8</span><br><span class="line">ADD blog-0.0.1-SNAPSHOT.jar /blog.jar</span><br><span class="line">EXPOSE 8080</span><br><span class="line">ENTRYPOINT ["java","-jar","/blog.jar"]</span><br></pre></td></tr></tbody></table></figure><p>è§£é‡Š</p><p>#æ³¨æ„ï¼Œdockerå‘½ä»¤å…¨éƒ¨å¤§å†™ï¼Œè¿™æ˜¯è§„å®šã€‚</p><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">#æ³¨æ„ï¼Œdockerå‘½ä»¤å…¨éƒ¨å¤§å†™ï¼Œè¿™æ˜¯è§„å®šã€‚</span><br><span class="line">#   From å…³é”®å­—è¡¨ç¤ºï¼ŒjaråŒ…ä¾èµ–çš„ç¯å¢ƒã€‚java:8  ç›¸å½“äºjdk1.8</span><br><span class="line">FROM java:8</span><br><span class="line"> </span><br><span class="line">#ADDå‘½ä»¤ </span><br><span class="line">#   blog-0.0.1-SNAPSHOT.jarï¼šè¿™æ˜¯ä½ ä¸Šä¼ jaråŒ…çš„åç§°ã€‚</span><br><span class="line">#   /blog.jarï¼šè¿™æ˜¯è‡ªå®šä¹‰çš„åç§°ã€‚ä½†æ˜¯æ³¨æ„è¦æœ‰ä¹‹å‰çš„/</span><br><span class="line">ADD blog-0.0.1-SNAPSHOT.jar /blog.jar</span><br><span class="line"> </span><br><span class="line">#MAINTAINER  ä½œè€…åç§°ã€‚å¯ä»¥åˆ é™¤ä¸å†™ã€‚</span><br><span class="line">MAINTAINER zhangxiaosan</span><br><span class="line"> </span><br><span class="line">#EXPOSE é¡¹ç›®æš´éœ²çš„ç«¯å£å·</span><br><span class="line">EXPOSE 8080</span><br><span class="line"> </span><br><span class="line">#/blog.jaræ­¤å¤„çš„åç§°è¦å’ŒADDå‘½ä»¤åé¢çš„ä¸€æ ·ã€‚</span><br><span class="line">ENTRYPOINT ["java","-jar","/blog.jar"]</span><br></pre></td></tr></tbody></table></figure><p>åœ¨dockeræ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><p>docker build -t blog:1.0 .</p><p>è¯´æ˜:<br>blog ä»£è¡¨è¦æ‰“åŒ…æˆçš„é•œåƒåç§°ã€‚æŒ‰ç…§è‡ªå·±å®é™…æƒ…å†µå†™ã€‚<br>:1.0 ä»£è¡¨ç‰ˆæœ¬å·ï¼Œå¯ä»¥ä¸å†™åˆ™é»˜è®¤ä¸ºlatest<br>. ä»£è¡¨ä¸ºå½“å‰ç›®å½•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸€ç›´åœ¨æ­¥éª¤ä¸€æ–‡ä»¶å¤¹ä¸­è¿›è¡Œæ“ä½œ,å¹¶ä¸”Dockerfileåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­çš„åŸå› ã€‚</p><p>è‹¥ä¹‹å‰Dockerfileä¸åœ¨æ­¥éª¤ä¸€çš„æ–‡ä»¶å¤¹ä¸­ åˆ™éœ€è¦æŒ‡å®šåˆ°å¯¹åº”çš„åœ°å€ã€‚</p><p>æ¥ä¸‹æ¥ç”¨docker images å°±å¯ä»¥æŸ¥çœ‹åˆ°è¿™ä¸ªé•œåƒå·²ç»è¢«åˆ›å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥è¿è¡Œè¿™ä¸ªé•œåƒå°±å¯ä»¥äº†</p><p>docker run â€“name blog -d -p 80:8080 blog:1.0</p><p>æ­¤æ—¶å°±å¯ä»¥ç”¨ä½ çš„å…¬ç½‘ipè®¿é—®äº†ï¼Œæˆ‘ç»‘å®šäº†åŸŸåï¼Œå¯ä»¥ç”¨åŸŸåè®¿é—®ã€‚</p><p>è¿˜æœ‰ä¸ªå‘½ä»¤è¦æä¸‹ï¼Œå¯ä»¥æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¶çš„æ—¥å¿—</p><p>docker logs å®¹å™¨id</p><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>æœåŠ¡å™¨</category>
      </categories>
      <tags>
        <tag>linux</tag>
        <tag>mysql</tag>
        <tag>docker</tag>
      </tags>
  </entry>
  <entry>
    <title>APlayeréŸ³ä¹æ’ä»¶</title>
    <url>/Details/12/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/04/25/yRjL7mZUGAhdE9K.png"><a id="more"></a><h3 id="1-APlayer"><a href="#1-APlayer" class="headerlink" title="1. APlayer"></a>1. APlayer</h3><p>APlayeræ˜¯å¤§ä½¬ä»¬å¼€å‘å‡ºæ¥çš„ä¸€æ¬¾HTML5æ¼‚äº®çš„éŸ³ä¹æ’ä»¶ï¼Œ<a href="https://github.com/MoePlayer/APlayer" target="_blank" rel="noopener">GitHubä¸‹è½½åœ°å€</a>ã€‚</p><h3 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2. ä½¿ç”¨"></a>2. ä½¿ç”¨</h3><p>ä¸‹è½½å¥½æ’ä»¶æ”¾åˆ°è‡ªå·±çš„å·¥ç¨‹ï¼Œ</p><ul><li>åœ¨éœ€è¦åŠ å…¥çš„htmlé¡µé¢å¯¼å…¥æ’ä»¶cssã€js</li></ul><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"APlayer.min.css"</span>></span></span><br><span class="line"><span class="tag"><<span class="name">script</span> <span class="attr">src</span>=<span class="string">"APlayer.min.js"</span>></span><span class="tag"></<span class="name">script</span>></span></span><br></pre></td></tr></tbody></table></figure><ul><li>åœ¨éœ€è¦æ”¾ç½®æ’ä»¶çš„ä½ç½®å¤„çš„htmlå…ƒç´ èµ‹äºˆidå±æ€§ï¼Œæ¯”å¦‚</li></ul><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">div</span> <span class="attr">id</span>=<span class="string">"aplayer"</span>></span><span class="tag"></<span class="name">div</span>></span></span><br></pre></td></tr></tbody></table></figure><ul><li>åœ¨bodyååŠ å…¥ä»¥ä¸‹</li></ul><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">script</span>></span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> ap = <span class="keyword">new</span> APlayer({</span></span><br><span class="line"><span class="javascript">    container: <span class="built_in">document</span>.getElementById(<span class="string">'aplayer'</span>),</span></span><br><span class="line">    audio: [{</span><br><span class="line"><span class="actionscript">        name: <span class="string">'name1'</span>,</span></span><br><span class="line"><span class="actionscript">        artist: <span class="string">'artist1'</span>,</span></span><br><span class="line"><span class="actionscript">        url: <span class="string">'url1.mp3'</span>,</span></span><br><span class="line"><span class="actionscript">        cover: <span class="string">'cover1.jpg'</span></span></span><br><span class="line">    },</span><br><span class="line">     {</span><br><span class="line"><span class="actionscript">        name: <span class="string">'name2'</span>,</span></span><br><span class="line"><span class="actionscript">        artist: <span class="string">'artist2'</span>,</span></span><br><span class="line"><span class="actionscript">        url: <span class="string">'url2.mp3'</span>,</span></span><br><span class="line"><span class="actionscript">        cover: <span class="string">'cover2.jpg'</span></span></span><br><span class="line">    }</span><br><span class="line">           ]</span><br><span class="line">});</span><br><span class="line"><span class="tag"></<span class="name">script</span>></span></span><br></pre></td></tr></tbody></table></figure><p>æˆ–è€…è‡ªå®šä¹‰jsç„¶åå¼•å…¥å³å¯</p><ul><li>name: æ­Œæ›²å</li><li>artist: æ­Œæ›²ä½œè€…</li><li>cover: æ­Œæ›²å›¾ç‰‡</li><li>url: éŸ³ä¹åœ°å€</li></ul><p>è¿™é‡Œæˆ‘ä»‹ç»ä¸ªå¥½ç”¨çš„éŸ³ä¹å¤–é“¾è·å–ç½‘ç«™:<a href="http://music.xf1433.com/" target="_blank" rel="noopener">http://music.xf1433.com/</a></p><h3 id="3-å¯é€‰å‚æ•°"><a href="#3-å¯é€‰å‚æ•°" class="headerlink" title="3. å¯é€‰å‚æ•°"></a>3. å¯é€‰å‚æ•°</h3><style>table th:nth-of-type(1){width:70px}</style><table><thead><tr><th>åç§°</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>mini</td><td>false</td><td>å¼€å¯è¿·ä½ æ¨¡å¼</td></tr><tr><td>fixed</td><td>false</td><td>å¼€å¯å¸åº•æ¨¡å¼</td></tr><tr><td>autoplay</td><td>false</td><td>éŸ³é¢‘è‡ªåŠ¨æ’­æ”¾</td></tr><tr><td>theme</td><td>â€˜#b7daffâ€™</td><td>ä¸»é¢˜è‰²</td></tr><tr><td>loop</td><td>â€˜allâ€™</td><td>éŸ³é¢‘å¾ªç¯æ’­æ”¾, å¯é€‰å€¼: â€˜allâ€™, â€˜oneâ€™, â€˜noneâ€™</td></tr><tr><td>preload</td><td>â€˜autoâ€™</td><td>é¢„åŠ è½½ï¼Œå¯é€‰å€¼: â€˜noneâ€™, â€˜metadataâ€™, â€˜autoâ€™</td></tr><tr><td>volume</td><td>0.7</td><td>é»˜è®¤éŸ³é‡ï¼Œè¯·æ³¨æ„æ’­æ”¾å™¨ä¼šè®°å¿†ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·æ‰‹åŠ¨è®¾ç½®éŸ³é‡åé»˜è®¤éŸ³é‡å³å¤±æ•ˆ</td></tr><tr><td>container</td><td>document.querySelector(â€˜.aplayerâ€™)</td><td>æ’­æ”¾å™¨å®¹å™¨å…ƒç´ </td></tr></tbody></table><h3 id="4-API"><a href="#4-API" class="headerlink" title="4. API"></a>4. API</h3><ul><li><code>ap.play()</code>: æ’­æ”¾éŸ³é¢‘</li><li><code>ap.pause()</code>: æš‚åœéŸ³é¢‘</li><li><code>ap.audio.currentTime</code>: è¿”å›éŸ³é¢‘å½“å‰æ’­æ”¾æ—¶é—´</li><li><code>ap.audio.duration</code>: è¿”å›éŸ³é¢‘æ€»æ—¶é—´</li><li><code>ap.audio.paused</code>: è¿”å›éŸ³é¢‘æ˜¯å¦æš‚åœ</li></ul><p>è¿™é‡Œåˆ—ä¸¾çš„éƒ½æ˜¯å¸¸ç”¨çš„ï¼Œè¯¦ç»†è¯·åˆ°å®˜ç½‘<a href="https://aplayer.js.org" target="_blank" rel="noopener">https://aplayer.js.org</a></p><p>å®Œæˆä»¥ä¸Šå·¥ä½œä½ å°±å¯ä»¥çœ‹åˆ°ç•Œé¢ä¸­æœ‰éŸ³ä¹äº†ï¼Œä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜å‡ºç°äº†ï¼Œå°±æ˜¯ä¸èƒ½åˆ·æ–°é¡µé¢ç»§ç»­ä¸Šæ¬¡çš„è®°å½•æ’­æ”¾ï¼Œçœ‹åˆ°è®¸å¤šäººè¯´ç”¨frameæ ‡ç­¾å’Œajaxã€<a href="http://bsify.admui.com/jquery-pjax/" target="_blank" rel="noopener">pjax</a>:</p><ul><li><p>frameä¾‹å­</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">html</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">frameset</span> <span class="attr">cols</span>=<span class="string">"0%,100%"</span>></span></span><br><span class="line">  <span class="comment"><!--éŸ³ä¹æ’ä»¶å¦å¤–æ”¾åœ¨musicé¡µé¢--></span></span><br><span class="line"><span class="tag"><<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"music.html"</span>></span></span><br><span class="line"> <span class="comment"><!--é¦–é¡µé¡µé¢--></span></span><br><span class="line"><span class="tag"><<span class="name">frame</span> <span class="attr">src</span>=<span class="string">"index.html"</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">frameset</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">html</span>></span></span><br></pre></td></tr></tbody></table></figure><p>ç¼ºç‚¹: è¿™æ ·éŸ³ä¹å¯ä»¥è¿ç»­æ’­æ”¾ï¼Œä½†æ²¡åŠæ³•åœ¨index.htmlé¡µé¢ä¸­æ§åˆ¶éŸ³é¢‘æ’­æ”¾</p></li><li><p>pjax (å’Œajaxç›¸ä¼¼ï¼Œç›¸å½“äºajaxçš„åŠ å¼ºç‰ˆ)</p><p>é¦–å…ˆä¸‹è½½<a href="https://github.com/defunkt/jquery-pjax" target="_blank" rel="noopener">jquery-pjaxæ’ä»¶</a></p><p>å¼•å…¥jqueryå’Œjquery-pjax</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"</span>></span><span class="tag"></<span class="name">script</span>></span></span><br><span class="line"><span class="tag"><<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery.pjax/2.0.1/jquery.pjax.min.js"</span>></span><span class="tag"></<span class="name">script</span>></span></span><br></pre></td></tr></tbody></table></figure><p>å°†è¦å±€éƒ¨æ›´æ–°çš„å†…å®¹ç”¨divåŒ…è£¹ï¼ŒæŒ‡å®šå±æ€§id</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>></span></span><br><span class="line">    <span class="comment"><!-- è¦æ›¿æ¢çš„å†…å®¹ --></span>	</span><br><span class="line">  <span class="tag"></<span class="name">div</span>></span></span><br></pre></td></tr></tbody></table></figure><p>åœ¨bodyåå®šä¹‰js,ä¸‹é¢å°†ä¼šä½¿idä¸ºcontainerä¸‹çš„æ‰€æœ‰aæ ‡ç­¾è·³è½¬ï¼Œæ²¡æœ‰åå°éœ€æ·»åŠ fragmentå®¹å™¨</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag"><<span class="name">script</span>></span></span><br><span class="line"><span class="javascript">$(<span class="built_in">document</span>).pjax(<span class="string">'a[target!="_blank"]'</span>, <span class="string">'#container'</span>, {</span></span><br><span class="line"><span class="actionscript">    fragment: <span class="string">"#container"</span>,</span></span><br><span class="line">    timeout: 5000</span><br><span class="line">});</span><br><span class="line"><span class="tag"></<span class="name">script</span>></span></span><br></pre></td></tr></tbody></table></figure></li></ul><p>æœ€åæ„Ÿè°¢å„ä½å¤§ä½¬ä»¬çš„è´¡çŒ®ï¼</p><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>æ’ä»¶</category>
      </categories>
      <tags>
        <tag>éŸ³ä¹</tag>
        <tag>pjax</tag>
      </tags>
  </entry>
  <entry>
    <title>æ­å»ºmybatis</title>
    <url>/Details/09/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/04/25/p5w6GHLN7A2VtrP.jpg"><a id="more"></a><p>MyBatis æ˜¯æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥å¯¹é…ç½®å’ŒåŸç”ŸMapä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Old Java Objects,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•</p><h6 id="1-åŸºç¡€é¡¹ç›®ç›®å½•ç»“æ„"><a href="#1-åŸºç¡€é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="1. åŸºç¡€é¡¹ç›®ç›®å½•ç»“æ„"></a>1. åŸºç¡€é¡¹ç›®ç›®å½•ç»“æ„</h6><p><img src="https://i.loli.net/2020/04/25/fcR1gSCtBHi2umz.png" alt="load"></p><h6 id="2-mavenä¾èµ–"><a href="#2-mavenä¾èµ–" class="headerlink" title="2. mavenä¾èµ–"></a>2. mavenä¾èµ–</h6><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8"?></span></span><br><span class="line"><span class="tag"><<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">modelVersion</span>></span>4.0.0<span class="tag"></<span class="name">modelVersion</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="tag"><<span class="name">groupId</span>></span>org.org.example<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">artifactId</span>></span>mybatis_01<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">version</span>></span>1.0-SNAPSHOT<span class="tag"></<span class="name">version</span>></span></span><br><span class="line"><span class="comment"><!--javaæ–‡ä»¶ä¸­xmlæ˜ å°„é»˜è®¤æ— æ³•æ‰«æï¼Œéœ€åŠ ä¸Šbuildå³å¯æ‰«æxmlé…ç½®æ–‡ä»¶--></span></span><br><span class="line">    <span class="tag"><<span class="name">build</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">resources</span>></span></span><br><span class="line">            <span class="comment"><!-- resourcesæ–‡ä»¶ --></span></span><br><span class="line">            <span class="tag"><<span class="name">resource</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">directory</span>></span>src/main/java<span class="tag"></<span class="name">directory</span>></span></span><br><span class="line">                <span class="comment"><!-- å¼•å…¥æ˜ å°„æ–‡ä»¶ç­‰ --></span></span><br><span class="line">                <span class="tag"><<span class="name">includes</span>></span></span><br><span class="line">                    <span class="tag"><<span class="name">include</span>></span>**/*.xml<span class="tag"></<span class="name">include</span>></span></span><br><span class="line">                <span class="tag"></<span class="name">includes</span>></span></span><br><span class="line">            <span class="tag"></<span class="name">resource</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">resources</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">build</span>></span></span><br><span class="line">    <span class="tag"><<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line">    <span class="comment"><!--mybatis--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>org.mybatis<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>mybatis<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>3.4.6<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line">        <span class="comment"><!--mysqlè¿æ¥é©±åŠ¨--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>MySQL<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>mysql-connector-java<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>5.1.40<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line">        <span class="comment"><!--junitæµ‹è¯•--></span></span><br><span class="line">        <span class="tag"><<span class="name">dependency</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">groupId</span>></span>junit<span class="tag"></<span class="name">groupId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">artifactId</span>></span>junit<span class="tag"></<span class="name">artifactId</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">version</span>></span>4.12<span class="tag"></<span class="name">version</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">scope</span>></span>test<span class="tag"></<span class="name">scope</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">dependency</span>></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag"></<span class="name">dependencies</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"></<span class="name">project</span>></span></span><br></pre></td></tr></tbody></table></figure><h6 id="3-å…¨å±€é…ç½®mybatis-config-xml"><a href="#3-å…¨å±€é…ç½®mybatis-config-xml" class="headerlink" title="3. å…¨å±€é…ç½®mybatis-config.xml"></a>3. å…¨å±€é…ç½®mybatis-config.xml</h6><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8" ?></span></span><br><span class="line"><span class="meta"><!DOCTYPE <span class="meta-keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span></span><br><span class="line"><span class="meta">        <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>></span></span><br><span class="line"><span class="tag"><<span class="name">configuration</span>></span></span><br><span class="line"><span class="comment"><!--åˆ«åï¼ŒåŒ…åé»˜è®¤ä¸ºç±»çš„å°å†™--></span></span><br><span class="line">   <span class="comment"><!--</span></span><br><span class="line"><span class="comment">   <typeAlias type="org.example.pojo.User" alias="User"/></span></span><br><span class="line"><span class="comment">   --></span></span><br><span class="line">    <span class="tag"><<span class="name">typeAliases</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">package</span> <span class="attr">name</span>=<span class="string">"org.example.pojo"</span>/></span></span><br><span class="line">    <span class="tag"></<span class="name">typeAliases</span>></span></span><br><span class="line"><span class="comment"><!--ç¯å¢ƒ--></span></span><br><span class="line">    <span class="tag"><<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>></span></span><br><span class="line">            <span class="tag"><<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span>/></span></span><br><span class="line">            <span class="tag"><<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>></span></span><br><span class="line">                <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"com.mysql.jdbc.Driver"</span>/></span></span><br><span class="line"><span class="comment"><!--?useUnicode=true&amp;characterEncoding=utf8è§£å†³ä¸­æ–‡ä¹±ç --></span></span><br><span class="line">                <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"jdbc:mysql://localhost:3306/login?useUnicode=true<span class="symbol">&amp;</span>characterEncoding=utf8"</span>/></span></span><br><span class="line">                <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"root"</span>/></span></span><br><span class="line">                <span class="tag"><<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/></span></span><br><span class="line">            <span class="tag"></<span class="name">dataSource</span>></span></span><br><span class="line">        <span class="tag"></<span class="name">environment</span>></span></span><br><span class="line">    <span class="tag"></<span class="name">environments</span>></span></span><br><span class="line"></span><br><span class="line"><span class="comment"><!--æ˜ å°„sqlé…ç½®æ–‡ä»¶--></span></span><br><span class="line">    <span class="tag"><<span class="name">mappers</span>></span></span><br><span class="line">        <span class="tag"><<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"org/example/dao/UserMapper.xml"</span>/></span></span><br><span class="line">    <span class="tag"></<span class="name">mappers</span>></span></span><br><span class="line"><span class="tag"></<span class="name">configuration</span>></span></span><br></pre></td></tr></tbody></table></figure><h6 id="4-æ¥å£ç»‘å®šé…ç½®æ–‡ä»¶UserMapper-xml"><a href="#4-æ¥å£ç»‘å®šé…ç½®æ–‡ä»¶UserMapper-xml" class="headerlink" title="4. æ¥å£ç»‘å®šé…ç½®æ–‡ä»¶UserMapper.xml"></a>4. æ¥å£ç»‘å®šé…ç½®æ–‡ä»¶UserMapper.xml</h6><figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta"><?xml version="1.0" encoding="UTF-8" ?></span></span><br><span class="line">        <span class="meta"><!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">                <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">                <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>></span></span><br><span class="line"><span class="comment"><!--ç»‘å®šæ¥å£å…¨é™å®šç±»å--></span></span><br><span class="line"><span class="tag"><<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"org.example.dao.UserMapper"</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryUser"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>></span></span><br><span class="line">    select *from login.user</span><br><span class="line"><span class="tag"></<span class="name">select</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">select</span> <span class="attr">id</span>=<span class="string">"queryUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>></span></span><br><span class="line">    select *from login.user where id=#{id}</span><br><span class="line"><span class="tag"></<span class="name">select</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addUser"</span> <span class="attr">parameterType</span>=<span class="string">"org.example.pojo.User"</span>></span></span><br><span class="line">    insert into login.user (id,username,password) values (#{id},#{username},#{password})</span><br><span class="line"><span class="tag"></<span class="name">insert</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUser"</span> <span class="attr">parameterType</span>=<span class="string">"org.example.pojo.User"</span>></span></span><br><span class="line">        update login.user set username=#{username},paassword=#{password} where id={id}</span><br><span class="line">    <span class="tag"></<span class="name">update</span>></span></span><br><span class="line"></span><br><span class="line"><span class="tag"><<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUser"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>></span></span><br><span class="line">        delete from login.user where id=#{id}</span><br><span class="line">    <span class="tag"></<span class="name">delete</span>></span></span><br><span class="line"><span class="tag"></<span class="name">mapper</span>></span></span><br></pre></td></tr></tbody></table></figure><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>mybatis</category>
      </categories>
      <tags>
        <tag>sql</tag>
        <tag>jdbc</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨lombokæŠ¥é”™è§£å†³</title>
    <url>/err/09/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>ä¹‹å‰åšé¡¹ç›®æ—¶åœ¨ä½¿ç”¨lombokæ’ä»¶å¯åŠ¨é¡¹ç›®æ—¶æŠ¥é”™ï¼Œåœ¨æ­¤è®°å½•ä¸€ä¸‹</p><a id="more"></a><p>ï¼Œå¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ã€‚</p><h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">ERROR o.a.c.c.C.[.[.[.ã€dispatcherServletã€‘ </span><br><span class="line">- Servlet.service() for servlet ã€dispatcherServletã€‘</span><br><span class="line"> in context with path ã€ã€‘ threw exception ã€Handler processing failed; nested exception is java.lang.StackOverflowErrorã€‘ with root cause</span><br><span class="line">java.lang.StackOverflowError: null</span><br></pre></td></tr></tbody></table></figure><ul><li>å‡ºç°ä»¥ä¸Šé”™è¯¯å¹¶ä¸”å®ä½“ç±»ä¹‹é—´ä¸åœçš„å‡ºç°è°ƒç”¨ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯ç”±äºå®ä½“ç±»ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œåœ¨ä½¿ç”¨lombokçš„æ³¨è§£æ—¶æ˜¯ä¼šé»˜è®¤ç”Ÿæˆtostringæ–¹æ³•ï¼Œåœ¨ä¸€æ–¹è°ƒç”¨å¦ä¸€æ–¹çš„æ—¶å€™å°±ä¼šå‡ºç°ç›¸äº’è°ƒç”¨çš„æƒ…å†µï¼Œæ‰€ä»¥ä¼šå‡ºç°æ ˆæº¢å‡ºçš„æƒ…å†µã€‚<h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4></li><li>å–æ¶ˆä¸€æ–¹å®ä½“ç±»çš„tostringæ–¹æ³•ï¼Œå³åœ¨éœ€è¦å–æ¶ˆçš„å±æ€§ä¸ŠåŠ ä¸Šlombokæ³¨è§£@ToString.Excludeæˆ–è€…åœ¨ç±»ä¼¼åŠ ä¸Š@ToString(exclude=â€å±æ€§åâ€)ï¼Œå¥½äº†ï¼Œé—®é¢˜å¾—åˆ°è§£å†³ã€‚</li></ul><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>errorNote</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>lombok</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexoå¿«é€Ÿæ­å»ºä¸ªäººåšå®¢</title>
    <url>/Details/03/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><p>Hexo<a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">ä¸­æ–‡å®˜æ–¹ç½‘ç«™</a>æ˜¯ä¸€ä¸ªå¿«é€Ÿ, ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶. è®©ä¸Šç™¾ä¸ªé¡µé¢åœ¨å‡ ç§’å†…ç¬é—´å®Œæˆæ¸²æŸ“. Hexoæ”¯æŒGithub Flavored Markdownçš„æ‰€æœ‰åŠŸèƒ½, ç”šè‡³å¯ä»¥æ•´åˆOctopressçš„å¤§å¤šæ•°æ’ä»¶. å¹¶è‡ªå·±ä¹Ÿæ‹¥æœ‰å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿ.</p><a id="more"></a><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><p>åˆ©ç”¨Hexoæ¡†æ¶diyä½ çš„åšå®¢ï¼Œä¸‹é¢æˆ‘ä»¬å¿«é€Ÿå¼€å§‹å§ï¼</p><h6 id="bulb-å®‰è£…Hexo"><a href="#bulb-å®‰è£…Hexo" class="headerlink" title=":bulb:å®‰è£…Hexo"></a><span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8">ğŸ’¡</span>å®‰è£…Hexo</h6><ol><li><p>é¦–å…ˆéœ€è¦å®‰è£…<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">node.js</a>ç¯å¢ƒ,æ¥ä¸‹æ¥åœ¨ç£ç›˜ä»»æ„ä½ç½®æ–°å»ºåšå®¢ç³»ç»Ÿé¡¹ç›®æ–‡ä»¶</p></li><li><p>å¯ä¸‹è½½æ·˜å®é•œåƒã€cnpmã€‘æå‡ä¸‹è½½é€Ÿåº¦ï¼ˆå¯é€‰ï¼‰ï¼Œæ²¡æœ‰åˆ™å¯ä»¥å°†ä¸‹é¢çš„cnpmæ›¿æ¢æˆnpmå®‰è£…</p></li><li><p>cnpm install -g hexo-cli ï¼ˆå®‰è£…Hexoï¼‰</p></li><li><p>hexo -vï¼ˆæŸ¥çœ‹hexoç‰ˆæœ¬ï¼‰</p></li><li><p>åœ¨ä»»æ„ç›˜ç¬¦è‡ªå·±åˆ›å»ºä¸€ä¸ªå·¥ç¨‹æ–‡ä»¶ç”¨äºç¨åæ„å»ºå·¥ç¨‹ç”¨</p></li><li><p>å‘½ä»¤è¿›å…¥åˆšå»ºç«‹çš„å·¥ç¨‹æ–‡ä»¶è¾“å…¥ hexo init(åˆå§‹åŒ–å·¥ç¨‹)</p></li><li><p>hexo n â€œæˆ‘çš„ç¬¬ä¸€ç¯‡åšå®¢æ–‡ç« â€ï¼ˆæ·»åŠ æ–‡ç« ï¼‰</p></li><li><p>å¯ä»¥è¿›å…¥å·¥ç¨‹ç›®å½•ä¸‹çš„source/_posts/xxx.mdè¿›è¡Œç¼–è¾‘æ–‡ç« </p></li><li><p>hexo clean (æ¸…é™¤ç¼“å­˜)</p></li><li><p>hexo g(é‡æ–°ç”Ÿæˆ)</p></li><li><p>å¯åŠ¨åšå®¢ hexo s</p></li></ol><ul><li>ä»¥ä¸‹æ˜¯éƒ¨ç½²åˆ°github pagesï¼ˆå¯é€‰ï¼‰</li></ul><ol><li><p>cnpm install â€“save hexo-deployer-git (å®‰è£…æ’ä»¶)</p></li><li><p>è®¾ç½®_config.ymlï¼Œå°†deploymentä¸­typeçš„å€¼æ”¹ä¸ºgitï¼Œä»“åº“repoçš„å€¼æ”¹ä¸ºgithubä¸Šçš„åœ°å€ï¼Œæ·»åŠ brach: master</p></li><li><p>hexo d(è‡ªåŠ¨éƒ¨ç½²)ï¼Œåé¢è¾“å…¥githubå¯†ç </p></li></ol><h5 id="bulb-æ›´æ¢ä¸»é¢˜"><a href="#bulb-æ›´æ¢ä¸»é¢˜" class="headerlink" title=":bulb:æ›´æ¢ä¸»é¢˜"></a><span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a1.png?v8">ğŸ’¡</span>æ›´æ¢ä¸»é¢˜</h5><ol><li><p><a href="https://hexo.io/themes/" target="_blank" rel="noopener">ä¸‹è½½ä¸»é¢˜</a>ï¼Œä¸‹è½½åæ”¾å…¥themesæ–‡ä»¶ä¸‹</p></li><li><p>å°†ä¸»é¢˜åŠ è½½è¿›å·¥ç¨‹ï¼Œä¿®æ”¹_config.yml,å°†themeçš„å€¼è®¾ç½®æˆä¸‹è½½åçš„ä¸»é¢˜æ–‡ä»¶å¤¹å</p></li><li><p>hexo clean</p></li><li><p>hexo g(é‡æ–°ç”Ÿæˆ)</p></li><li><p>hexo s</p></li><li><p>é€€å‡ºï¼Œæ¨åˆ°è¿œç¨‹githubä»“åº“,åé¢å¯ä»¥é€šè¿‡å…è´¹åŸŸåè®¿é—®äº†,è¾“å…¥ç™»å½•ç”¨æˆ·å.github.ioå³å¯è®¿é—®</p></li></ol><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>åšå®¢</tag>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>springbootå…¥é—¨</title>
    <url>/Details/02/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><html><head></head><body><img class="st" src="https://i.loli.net/2020/04/25/y1fDMlYq9PNint3.png"><a id="more"></a><h2 id="1-åˆè¯†springboot"><a href="#1-åˆè¯†springboot" class="headerlink" title="1.åˆè¯†springboot"></a>1.åˆè¯†springboot</h2><ul><li>SpringBootæ˜¯ç”±Pivotalå›¢é˜Ÿåœ¨2013å¹´å¼€å§‹ç ”å‘ã€2014å¹´4æœˆå‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„å…¨æ–°å¼€æºçš„è½»é‡çº§æ¡†æ¶ã€‚å®ƒåŸºäºSpring4.0è®¾è®¡ï¼Œä¸ä»…ç»§æ‰¿äº†Springæ¡†æ¶åŸæœ‰çš„ä¼˜ç§€ç‰¹æ€§ï¼Œè€Œä¸”è¿˜é€šè¿‡ç®€åŒ–é…ç½®æ¥è¿›ä¸€æ­¥ç®€åŒ–äº†Springåº”ç”¨çš„æ•´ä¸ªæ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚å¦å¤–SpringBooté€šè¿‡é›†æˆå¤§é‡çš„æ¡†æ¶ä½¿å¾—ä¾èµ–åŒ…çš„ç‰ˆæœ¬å†²çªï¼Œä»¥åŠå¼•ç”¨çš„ä¸ç¨³å®šæ€§ç­‰é—®é¢˜å¾—åˆ°äº†å¾ˆå¥½çš„è§£å†³ã€‚å¯èƒ½è¿™æ ·è¯´äº†ä½ è¿˜æ˜¯å¾ˆæ‡µé€¼ï¼Œç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€å°†å°±æ˜¯å¸®åŠ©æˆ‘ä»¬ç®€åŒ–ä¼ ç»Ÿçš„ssmæ¡†æ¶ç­‰çš„é…ç½®ï¼Œæ¯”å¦‚å„ç§ç¹ççš„xmlé…ç½®ã€‚</li></ul><h2 id="2-ç¯å¢ƒ"><a href="#2-ç¯å¢ƒ" class="headerlink" title="2.ç¯å¢ƒ"></a>2.ç¯å¢ƒ</h2><ul><li>jdk</li><li>maven</li><li>idea</li></ul><h2 id="3-springbootä¼˜åŠ¿"><a href="#3-springbootä¼˜åŠ¿" class="headerlink" title="3.springbootä¼˜åŠ¿"></a>3.springbootä¼˜åŠ¿</h2><ol><li>springbootå¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨è£…é…javabean</li><li>springbootå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨é…ç½®äº‹åŠ¡</li><li>springbootå¯ä»¥å¸®æˆ‘ä»¬åŠ è½½é…ç½®æ–‡ä»¶</li><li>springbootå†…åµŒtomcat</li></ol><p>è¿™äº›éƒ½æ˜¯springbootä¸€äº›ä¼˜ç‚¹ï¼Œå½“ç„¶è¿˜ä¸æ­¢è¿™äº›ï¼Œæ¯”å¦‚æ”¯æŒçƒ­éƒ¨ç½²ï¼Œæ—¥å¿—ï¼Œå„ç§å¼•æ“æ¨¡æ¿ï¼Œè¿˜å¯ä»¥æ•´åˆå…¶ä»–ä¼˜ç§€çš„æ¡†æ¶ç­‰ç­‰ã€‚</p><h2 id="4-å…¥é—¨"><a href="#4-å…¥é—¨" class="headerlink" title="4.å…¥é—¨"></a>4.å…¥é—¨</h2><p>æ­¥éª¤å¦‚ä¸‹ï¼š<br>1.é¦–å…ˆæ–°å»ºé¡¹ç›®é€‰æ‹©Spring Initializrï¼Œç‚¹å‡»å³è¾¹çš„next</p><p><img src="https://i.loli.net/2020/04/25/v674kT5obKpPOli.png" alt></p><p>2.ç„¶åè¾“å…¥è§„èŒƒåŒ…åã€é¡¹ç›®åï¼Œä¸€èˆ¬æ˜¯è‡ªåŠ¨ç”Ÿæˆï¼Œç„¶ånext</p><p><img src="https://i.loli.net/2020/04/25/KfC5zyuXBnZrs9L.png" alt></p><p>3.é€‰æ‹©éœ€è¦çš„ä¾èµ–ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºé€‰æ‹©äº†springWebä¾èµ–ï¼Œç„¶ånext,é€‰æ‹©é¡¹ç›®å­˜å‚¨ä½ç½®ï¼Œæœ€åfinish,è¿™æ ·ä¸‹é¡¹ç›®åˆå§‹åŒ–å®Œæˆ</p><p><img src="https://i.loli.net/2020/04/25/e4tzyHKEOdgYJil.png" alt></p><p>4.å¯ä»¥åˆ é™¤é¡¹ç›®ä¸­å¤šä½™çš„æ–‡ä»¶ï¼Œæ¥ä¸‹å±•å¼€æ–‡ä»¶å¤¹ä½ ä¾¿å¯ä»¥çœ‹åˆ°xxxApplicationçš„ç±»å•¦ï¼Œè¿™ä¸ªå°±æ˜¯ç¨‹åºä¸»å…¥å£ï¼Œæˆ‘ä»¬å…ˆåœ¨demoç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªtestç›®å½•ï¼Œå¹¶åœ¨å…¶ä¸‹é¢åˆ›å»ºControllerç±»ï¼Œç„¶åç±»ä¸Šé¢åŠ Controlleræ³¨è§£è¡¨ç¤ºè¿™ä¸ªç±»è¢«springbootè‡ªåŠ¨è£…é…åˆ°å®¹å™¨ä¸­ï¼Œå†åŠ ä¸ŠGetMappingã€ResponseBodyæ³¨è§£æ˜ å°„ï¼Œè¿™é‡ŒåŠ å…¥ResponseBodyä¼šåœ¨æµè§ˆå™¨è¿”å›å­—ç¬¦ä¸²ï¼Œå¦åˆ™ä¼šè¿”å›springbooté»˜è®¤çš„ï¼Œä¹Ÿå°±æ˜¯resourcesä¸‹é¢çš„htmlï¼Œç”±äºæ²¡æœ‰å®šä¹‰é¡µé¢ï¼Œå¯åŠ¨åä¼šæŠ¥404é”™è¯¯ã€‚</p><p><img src="https://i.loli.net/2020/04/25/RZ8YL6NnD72m4FS.png" alt></p><p>5.æ‰¾åˆ°ä¸Šé¢çš„ç¨‹åºä¸»å…¥å£å¯åŠ¨é¡¹ç›®ï¼Œç­‰å¾…å‡ ç§’é’Ÿ</p><p><img src="https://i.loli.net/2020/04/25/Rjst3AOl8KJVDCM.png" alt></p><p>6.æœ€åæµè§ˆå™¨è¾“å…¥localhost:8080ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°â€hello world!â€å•¦</p><p>æ˜¯ä¸æ˜¯è§‰å¾—so easyå•Š!</p><!-- rebuild by neat --><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></body></html>]]></content>
      <categories>
        <category>springboot</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>javaWeb</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
</search>
